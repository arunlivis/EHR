var Data = require('../EHR_Json/data.json')

var check=[];                var employer=[];            var employer_1=[];
var type_of_insurance=[];
var check_1=[];              var insurance=[];          var insurance_1=[];
var ph_1=[];                 var phone=[];             var phone_1=[];
var policy=[];                                       var policy_1=[];
var group=[];                                          var group_1=[];
var hear=[];          var sub=[];
var pho=[];          var pho_4=[];

module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[1].username, Data.user1[1].password)

},
'view files' : function (browser){
      browser
      .pause(1000)      
       .useCss()
       .click('a[class="firstLevel"]')
       .pause(500)
       .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
       .waitForElementVisible('#col0_filter' , 60000)
       .useXpath()
       .pause(200)
       .click("//*[@id='patient']/tbody/tr/td[6]/a/i")
       .useCss()
       .waitForElementVisible('#patient_first_name' , 60000)
       .pause(500)
     },
'Health Insurance Information':function(browser){
  browser
    .useXpath()
    .click("//*[@id='formtab']/a")
    .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000)
    .pause(500)
    .getText("//*[@id='formsContent']/div[3]/div[2]/span" , function(result){
            browser
            if(result.value=="Completed"){
                   browser
                   .useXpath()
                   .click("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']") 
                   .useCss() 
                   .waitForElementVisible('#cpi_firstName' , 60000)
                   .pause(500)
                   .getLocationInView('#maritalStatuscpi')
                   .pause(500)
                   .getValue('#employername' , function(result){
                         check.push(result.value)
                   })
                   .pause(500)
                   .getLocationInView('#involvedBeforeInAutoWorkAccidentYes_id')
                   .pause(500)
                   .getValue('#insuranceType_id' , function(result){
                         type_of_insurance.push(result.value)
                   })
                   .getValue('#healthInsuranceName_id' , function(result){
                         check_1.push(result.value)
                   })
                   .getValue('#healthInsurancePhone_id' , function(result){
                        if(result.value==""){
                          ph_1.push(0)
                        }else{
                          abc=result.value
                         ph_1.push(abc[1]+abc[2]+abc[3]+abc[6]+abc[7]+abc[8]+abc[10]+abc[11]+abc[12]+abc[13])
                       }
                   })
                   browser
                   .useCss()
                   .pause(500)
                   .getLocationInView('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
                   .pause(500)
                   .getLocationInView('#acceptstatement_id')
                   .pause(500)
                   .click('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
                   .useXpath()
                   .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Health Insurance Information']" , 60000)
                   .pause(2500)
                   .useCss()
                   .getLocationInView('#backToTop')
                   .useXpath()
                   .pause(2500)
                   .useXpath()
                   .getLocationInView("//*[@id='formsContent']/div/div/a[text()='Consent to Treat Release of Records']")
                   .pause(2500)
                   .click("//*[@id='formsContent']/div/div/a[text()='Health Insurance Information']")
                   .healthinfo(check,type_of_insurance,check_1,ph_1,employer,insurance,phone,policy,group,hear,pho,employer_1,insurance_1,phone_1,policy_1,
                                group_1,sub,pho_4)
                  

            }
        })
    browser
    .end()
    },
'result':''+function(browser){
  browser
  console.log("Employer's Name check 1---------->"+[JSON.stringify(check.join())==JSON.stringify(employer.join()) && JSON.stringify(employer.join())==JSON.stringify(employer_1.join())])
  console.log("Insurance Company---------------->"+[JSON.stringify(check_1.join())==JSON.stringify(insurance.join()) && JSON.stringify(insurance.join())==JSON.stringify(insurance_1.join())])
  console.log("phone_1-------------------------->"+[JSON.stringify(ph_1.map(Number))==JSON.stringify(phone.map(Number)) && JSON.stringify(phone.map(Number))==JSON.stringify(phone_1.map(Number))])
  console.log("Policy--------------------------->"+[JSON.stringify(policy.map(Number))==JSON.stringify(policy_1.map(Number))])
  console.log("Group---------------------------->"+[JSON.stringify(group.map(Number))==JSON.stringify(group_1.map(Number))])
  console.log("Supplemental Insurance Company--->"+[JSON.stringify(hear.join())==JSON.stringify(sub.join())])
  console.log("phone_2-------------------------->"+[JSON.stringify(pho.map(Number))==JSON.stringify(pho_4.map(Number))])
  
}      
  }  