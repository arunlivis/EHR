var Data = require('../EHR_Json/data.json')

var insurance_name=[];
var name=[];
var city=[];
var zip=[];

var insu_company;                 var insu_company_1=[];
var address;                      var address_1=[];
var nameOfAttorneyid;             var nameOfAttorneyid_1=[];
var address1;                     var address1_1=[];
var amount;                       var amount_1=[];

module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[1].username, Data.user1[1].password)

},
'view files' : function (browser){
      browser
      .pause(1000)      
       .useCss()
       .click('a[class="firstLevel"]')
       .pause(500)
       .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
       .waitForElementVisible('#col0_filter' , 60000)
       .useXpath()
       .pause(200)
       .click("//*[@id='patient']/tbody/tr/td[6]/a/i")
       .useCss()
       .waitForElementVisible('#patient_first_name' , 60000)
       .pause(500)
       .getValue('#patient_last_name' , function(result){
               name.push(result.value)
       })
       .getValue('#patient_first_name' , function(result){
       	      name.push(result.value)
       })
       .getValue('#city' , function(result){
       	   city.push(result.value)
       })
       .getValue('#zipcode' , function(result){
       	   zip.push(result.value)
       })
},
'CPI':function(browser){
  browser 
    .useXpath()
    .click("//*[@id='formtab']/a")
    .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000)
    .pause(500)
    .click("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']")
    .useCss()
    .waitForElementVisible('#cpiDate' , 60000)
    .pause(500)
    .getValue('#healthInsuranceName_id' , function(result){
        insurance_name.push(result.value)
    })
},
'Admin Forms':function(browser){
	var a=['Berkshire Hathaway' , 'Allianz' , 'Zurich Insurance' , 'Nationwide Group' , 'USAA Group']
        insu_company=a[Math.floor(Math.random()*a.length)]
        var b=['north street' , 'car street' , 'gandhi street' , 'united colony']
        address=b[Math.floor(Math.random()*b.length)]
        var c=['Jacob' , 'Ryan' , 'Jacob' , 'Ethan']
        nameOfAttorneyid=c[Math.floor(Math.random()*c.length)]
        var d=['north street' , 'car street' , 'gandhi street' , 'united colony']
        address1=d[Math.floor(Math.random()*d.length)]
        amount=Math.floor((Math.random()*1000000000)+9000000000)


	  browser
	      .useCss()
	      .click('a[onclick="getAdminDefaultFormList();"]')
	      .waitForElementVisible('button[onclick="getFormsList()"]' , 60000)
	      .pause(1000)
	      .useXpath()
        .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Notice of Outstanding Bill to Patient']")
        .pause(500)
        .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Work School Excused Slip']")
        .pause(500)
        .getText("//*[@id='adminDefaultFormsContent']/div[8]/div[2]/span/span" , function(result){
        	browser
        	  .click("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Notice of Outstanding Bill to Patient']")
        	  .useCss()
        	  .waitForElementVisible('#btnSendPatientForm' , 60000)
            .pause(900)
        	  .verify.valueContains('#insuranceCompanyid' , insurance_name)
        	  .verify.valueContains('#patientNameid' , name.join(" "))
        	  .verify.valueContains('#patientAddressid' , city)
        	  .verify.valueContains('#patientAddressid' , zip)
        	  .useXpath()
        	  .getText("//*[@id='adminDefaultFormsContent']/p/span[4]/b" , function(result){
        	  	   browser
        	  	     .verify.containsText("//*[@id='noticeOfOutstandingBill']/div/div[8]/div[3]/span[2]/b" , result.value)
        	  })
            if(result.value=="Please Complete"){
              browser
        	  .pause(500)
        	  .useCss()
        	  .clearValue('#insuranceCompanyid')
        	  .pause(1500)
            .getLocationInView('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
            .pause(500)
        	  .getLocationInView('#medicalFeesid1')
        	  .pause(800)
        	  //.useXpath()
        	  .click('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
        	  .pause(500)
        	  .useCss()
        	  .verify.visible('#insuranceCompanyid_error')
        	  .verify.visible('#nameOfAttorneyid_error')
        	  .verify.visible('#medicalFeesid_error')
        	  .verify.visible('#acceptstatement_id_error')
        	  .verify.visible('#noticeofoutstandingwholeForm_error')
        	  
         	    }
         })
        browser
              .pause(500)
        	  .getLocationInView('#medicalFeesid1')
        	  .pause(500)
        	  .getLocationInView('#date_id')
        	  .pause(500)
        	  .clearValue('#insuranceCompanyid')
        	  .setValue('#insuranceCompanyid' , insu_company)
        	  .clearValue('#insuranceCompanyAddressid')
        	  .setValue('#insuranceCompanyAddressid' , address)
        	  .clearValue('#nameOfAttorneyid')
        	  .setValue('#nameOfAttorneyid' , nameOfAttorneyid)
        	  .clearValue('#nameOfAttorneyAddressid')
        	  .setValue('#nameOfAttorneyAddressid' , address1)
            .clearValue('#medicalFeesid')
            .setValue('#medicalFeesid' , amount)
            .pause(500)
            .getLocationInView('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
            .pause(500)
            .getLocationInView('#medicalFeesid1')
            .pause(500)
            .click('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
            .waitForElementVisible('button[onclick="getFormsList()"]' , 60000)
            .pause(1000)
            .useXpath()
            .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Notice of Outstanding Bill to Patient']")
            .pause(500)
            .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Work School Excused Slip']")
            .pause(500)
            .click("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Notice of Outstanding Bill to Patient']")
            .useCss()
            .waitForElementVisible('#btnSendPatientForm' , 60000)
            .pause(500)
            .verify.valueContains('#insuranceCompanyid' , insu_company)
            .verify.containsText('#insuranceCompanyAddressid' , address)
            .verify.valueContains('#nameOfAttorneyid' , nameOfAttorneyid)
            .verify.containsText('#nameOfAttorneyAddressid' , address1)
            .verify.valueContains('#medicalFeesid' , amount)

            .getValue('#insuranceCompanyid' , function(result){
                insu_company_1.push(result.value)
            })
            .getText('#insuranceCompanyAddressid' , function(result){
                 address_1.push(result.value)
            })
            .getValue('#nameOfAttorneyid' , function(result){
                 nameOfAttorneyid_1.push(result.value)
            })
            .getText('#nameOfAttorneyAddressid' , function(result){
                 address1_1.push(result.value)
            })
            .getValue('#medicalFeesid' , function(result){
                 amount_1.push(result.value)
                 browser
                 .verify.valueContains(result.value)
            })
            browser
            .pause(500)
            .verify.visible('input[id="acceptstatement_id"][checked="checked"]')

},
'Result':''+function(browser){
     browser
           console.log("insu_company------->"+[insu_company==insu_company_1])
           console.log("address------------>"+[address==address_1])
           console.log("nameOfAttorneyid--->"+[nameOfAttorneyid==nameOfAttorneyid_1])
           console.log("address1----------->"+[address1==address1_1])
           console.log("amount------------->"+[amount==amount_1])
}
}        