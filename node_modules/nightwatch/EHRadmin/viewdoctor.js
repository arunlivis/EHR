var Data = require(process.cwd()+'\\EHR_Json\\data.json')
var fs = require('fs');
var fileName = process.cwd()+'\\EHR_Json\\data.json';
var file = require(fileName);

var first_name;               var first_name_1=[];
var last_name;                var last_name_1=[];
var email;                    var email_1=[];
var phone;                    var phone_1=[];
var gender;                   var gender_1=[];
var qualification;            var qualification_1=[];
var specialist;               var specialist_1=[];
var address;                  var address_1=[];
var city;                     var city_1=[];
var zip;                      var zip_1=[];
var doctor_username;

var last_edit;            var last_edit_1=[];
var first_edit;            var first_edit_1=[];
var email_ID;            var email_ID_1=[];
var phone_no;            var phone_no_1=[];
var qualification_edit;            var qualification_edit_1=[];
var specialist_edit;            var specialist_edit_1=[];
var address_edit;            var address_edit_1=[];
var city_edit;            var city_edit_1=[];
var zip_edit;            var zip_edit_1=[];

module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[1].username, Data.user1[1].password)

},
'View Doctors':function(browser){
	browser
	   .useCss()
	   .pause(500)
	   .click('a[class=""]')
	   .pause(300)
	   .click('a[href="/EHR/Clinicadmin/Doctors"]')
	   .waitForElementVisible('#addnew' , 60000)
	   .pause(500)
},
'Add Doctor':function(browser){

	a=['Chloe' , 'Mia' , 'Ella' , 'Olivia' , 'Madison' , 'Kathleen' , 'Rhonda' , 'Colleen']
	first_name=a[Math.floor(Math.random()*a.length)] 
	b=['Isabella' , 'Emma' , 'Abigail' , 'Natalie' , 'Grace' , 'Rebecca' , 'Diane' , 'Shirley']
	last_name=b[Math.floor(Math.random()*b.length)]
	ssn=Math.floor((Math.random()*1000000000)+9000000000)
	c=['patient1@gmail.com' , 'patient2@ymail.com' , 'patient3@yahoo.com' , 'patient4@outlook.com']
    email=c[Math.floor(Math.random()*c.length)]
    phone=Math.floor((Math.random()*1000000000)+9000000000)
    gender=Math.floor((Math.random()*3)+1)
    d=['MBBS', 'BMBS', 'MBChB', 'MBBCh']
    qualification=d[Math.floor(Math.random()*d.length)]
    e=['Cardiology' , 'Dermatology' , 'Radiotherapy' , 'General surgery' , 'Neurology']
    specialist=e[Math.floor(Math.random()*e.length)]
    var f=['North Street' , 'Car Street' , 'Lane Street' , 'United Colony']
    address=f[Math.floor(Math.random()*f.length)]
    g=Math.floor((Math.random()*225)+2)
    h=["Alabama" , "New Mexico" , "Nebraska"]
    city=h[Math.floor(Math.random()*h.length)]
    zip=Math.floor((Math.random()*88889)+11111)

	browser	   
	   .click('#addnew')
	   .waitForElementVisible('#firstName' , 60000)
	   .pause(500)
	   .useXpath()
	   .click("//*[@id='country']/option[1]")
	   .pause(500)
	   .useCss()
	   .click('button[class="btn btn-primary"][type="submit"]')
	   .verify.visible('#firstName_error')
	   .verify.visible('#lastName_error')
	   .verify.visible('#dateOfBirth_error')
	   .verify.visible('#email_error')
	   .verify.visible('#phone_error')
	   .verify.visible('#qualification_error')
	   .verify.visible('#specialistIn_error')
	   .verify.visible('#address_error')
	   .verify.visible('#country_error')
	   .verify.visible('#state_error')
	   .verify.visible('#city_error')
	   .verify.visible('#zipcode_error')
	   .pause(500)
	   .clearValue('#firstName')
	   .setValue('#firstName' , first_name)
	   .clearValue('#lastName')
	   .setValue('#lastName' , last_name)
	   .useXpath()
	   .click("//*[@id='datetimepicker5']/span")
	   .pause(500)
	   .click("//*[@id='datetimepicker5']/span")
	   .pause(500)
	   .useCss()
	   .clearValue('#ssn')
	   .setValue('#ssn' , ssn)
	   .clearValue('#email')
	   .setValue('#email' , email)
	   .clearValue('#phone')
	   .setValue('#phone' , phone)
	   .useXpath()
	   .click("//*[@id='gender']/option["+gender+"]")
	   .useCss()
	   .clearValue('#qualification')
	   .setValue('#qualification' , qualification)
	   .clearValue('#specialistIn')
	   .setValue('#specialistIn' , specialist)
	   .clearValue('#address')
	   .setValue('#address' , address)
	   .useXpath()
	   .click("//*[@id='country']/option["+g+"]")
	   .click("//*[@id='state']/option[2]")
	   .useCss()
	   .clearValue('#city')
	   .setValue('#city' , city)
	   .clearValue('#zipcode')
	   .setValue('#zipcode' , zip)
	   .pause(300)
	   .click('button[class="btn btn-primary"][type="submit"]')
	   .waitForElementVisible('input[id="Last Name"]' , 60000)
	   .pause(500)
	   .setValue('input[id="Last Name"][class="column_filter"]' , last_name)
	   .setValue('input[id="First Name"][class="column_filter"]' , first_name)
	   .setValue('input[id="Email Address"][class="column_filter"]' , email)
	   .setValue('input[id="Specialist In "][class="column_filter"]' , specialist)
	   .pause(500)
	    .useXpath()
	   .getText("//*[@id='doctorList']/tbody/tr/td[6]" , function(result){
	   	     doctor_username=result.value
	   })
},
'Reset password':function(browser){
    browser	   
       .useCss()
	   .click('i[class="fa fa-key"]')
	   .pause(1500)
	   .useXpath()
	   .click("html/body/div[1]/div[2]/div/div/div[3]/button[2]")
	   .useCss()
	   .waitForElementVisible('#addnew' , 60000)
	   .pause(500)
	   
},
'Disable Doctor':function(browser){
	browser
      .useCss()
      .click('a[class="magenta tooltipsclass"]')
      .pause(1500)
      .useXpath()
      .click("html/body/div[1]/div[4]/div/div/div[3]/button[2]")
      .useCss()
      .waitForElementVisible('#addnew' , 60000)
	  .pause(1500)
	  .click('a[href="/EHR/EHR/j_spring_security_logout"]')
	  .waitForElementVisible('#username_id' , 60000)
	  .pause(1000)

},
'login Doctor':function(browser){
	browser
	  .useCss()
	  .setValue('#username_id' , doctor_username)
	  .setValue('#password_id' , doctor_username)
	  .pause(300)
	  .click('button[class="btn btn-primary"][type="submit"]')
	  .waitForElementVisible('div[class="login-error-text"]' , 60000)
	  .pause(500)
	  .verify.containsText('div[class="login-error-text"]' , 'Your account is disabled, please contact administrator')
	  .pause(500)
	  .clearValue('#username_id')
	  .setValue('#username_id' , Data.user1[1].username)
	  .clearValue('#password_id')
	  .setValue('#password_id' , Data.user1[1].password)
	  .click('button[class="btn btn-primary"][type="submit"]')
	  .waitForElementVisible('a[class=""]' , 60000)
	  .pause(500)
	  .click('a[class=""]')
	  .pause(300)
	  .click('a[href="/EHR/Clinicadmin/Doctors"]')
	  .waitForElementVisible('#addnew' , 60000)
	  .pause(1500)

},
'Enable Doctor':function(browser){
	browser
       .useCss()
       .pause(500)
	   .setValue('input[id="Last Name"][class="column_filter"]' , last_name)
	   .setValue('input[id="First Name"][class="column_filter"]' , first_name)
	   .setValue('input[id="Email Address"][class="column_filter"]' , email)
	   .setValue('input[id="Specialist In "][class="column_filter"]' , specialist)
	   .pause(500)
       .click('a[class="red tooltipsclass"]')
       .pause(1500)
       .useXpath()
       .click("html/body/div[1]/div[3]/div/div/div[3]/button[2]")
       .useCss()
       .waitForElementVisible('#addnew' , 60000)
	   .pause(1500)
	   .click('a[href="/EHR/EHR/j_spring_security_logout"]')
	   .waitForElementVisible('#username_id' , 60000)
	   .pause(500)
},
'Re-Login Doctor':function(browser){
	browser
	  .useCss()
	  .setValue('#username_id' , doctor_username)
	  .setValue('#password_id' , doctor_username)
	  .pause(300)
	  .click('button[class="btn btn-primary"][type="submit"]')
	  .waitForElementVisible('a[class="firstLevel"]' , 60000)
	  .pause(500)
	  .useXpath()
	  .click("//*[@id='username_label']")
	  .pause(300)
	  .useCss()
	  .click('a[href="/EHR/EHR/j_spring_security_logout"]')
	  .waitForElementVisible('#username_id' , 60000)
	  .pause(500)
	  .setValue('#username_id' , Data.user1[1].username)
	  .setValue('#password_id' , Data.user1[1].password)
	  .click('button[class="btn btn-primary"][type="submit"]')
	  .waitForElementVisible('a[class=""]' , 60000)
	  .pause(500)
	  .click('a[class=""]')
	  .pause(300)
	  .click('a[href="/EHR/Clinicadmin/Doctors"]')
	  .waitForElementVisible('#addnew' , 60000)
	  .pause(500)
	  .pause(500)
	   .setValue('input[id="Last Name"][class="column_filter"]' , last_name)
	   .setValue('input[id="First Name"][class="column_filter"]' , first_name)
	   .setValue('input[id="Email Address"][class="column_filter"]' , email)
	   .setValue('input[id="Specialist In "][class="column_filter"]' , specialist)
	   .pause(500)
},	  
'Check':function(browser){
	

	browser
	   .useCss()
	   .click('i[class="fa fa-edit"]')
	   .waitForElementVisible('#firstName' , 60000)
	   .pause(500)
	   .verify.valueContains('#firstName' , first_name)
       .verify.valueContains('#lastName' , last_name)
       .verify.valueContains('#email' , email)
       .verify.valueContains('#phone' , '('+phone.toString().substring(0, 3)+') '+phone.toString().substring(3, 6)+'-'+phone.toString().substring(6, 10))
       .verify.valueContains('#gender' , gender)
       .verify.valueContains('#qualification' , qualification)
       .verify.valueContains('#specialistIn' , specialist)
       .verify.containsText('#address' , address)
       .verify.valueContains('#city' , city)
       .verify.valueContains('#zipcode' , zip)
	   .getValue('#firstName' , function(result){
	   	      first_name_1.push(result.value)
	   })
	   .getValue('#lastName' , function(result){
	   	      last_name_1.push(result.value)
	   })
	   .getValue('#email' , function(result){
	   	    email_1.push(result.value)
	   })
	   .getValue('#phone' , function(result){
	               	xyz=result.value
                    phone_1.push(xyz[1]+xyz[2]+xyz[3]+xyz[6]+xyz[7]+xyz[8]+xyz[10]+xyz[11]+xyz[12]+xyz[13])
	   })
	   .getValue('#gender' , function(result){
	   	    gender_1.push(result.value)
	   })
	   .getValue('#qualification' , function(result){
	   	    qualification_1.push(result.value)
	   })
	   .getValue('#specialistIn' , function(result){
	   	    specialist_1.push(result.value)
	   })
	   .getText('#address' , function(result){
	   	    address_1.push(result.value)
	   })
	   .getValue('#city' , function(result){
	   	    city_1.push(result.value)
	   })
	   .getValue('#zipcode' , function(result){
	   	    zip_1.push(result.value)
	   })
},
'Edit doctor profile':function(browser){

	j=['Chloe' , 'Mia' , 'Ella' , 'Olivia' , 'Madison' , 'Kathleen' , '	Rhonda' , 'Colleen']
	last_edit=j[Math.floor(Math.random()*j.length)] 
	k=['Isabella' , 'Emma' , 'Abigail' , 'Natalie' , 'Grace' , 'Rebecca' , 'Diane' , 'Shirley']
	first_edit=k[Math.floor(Math.random()*k.length)]
	l=['patient1@gmail.com' , 'patient2@ymail.com' , 'patient3@yahoo.com' , 'patient4@outlook.com']
    email_ID=l[Math.floor(Math.random()*l.length)]
    phone_no=Math.floor((Math.random()*1000000000)+9000000000)
    m=['MBBS', 'BMBS', 'MBChB', 'MBBCh']
    qualification_edit=m[Math.floor(Math.random()*m.length)]
    n=['Cardiology' , 'Dermatology' , 'Radiotherapy' , 'General surgery' , 'Neurology']
    specialist_edit=n[Math.floor(Math.random()*n.length)]
    var o=['North Street' , 'Car Street' , 'Lane Street' , 'United Colony']
    address_edit=o[Math.floor(Math.random()*o.length)]
    p=["Alabama" , "New Mexico" , "Nebraska"]
    city_edit=p[Math.floor(Math.random()*p.length)]
    zip_edit=Math.floor((Math.random()*88889)+11111)

	browser
	   .pause(500)
	   .clearValue('#firstName')
	   .setValue('#firstName' , first_edit)
	   .clearValue('#lastName')
	   .setValue('#lastName' , last_edit)
       .useCss()
	   .clearValue('#email')
	   .setValue('#email' , email_ID)
	   .clearValue('#phone')
	   .setValue('#phone' , phone_no)
       .clearValue('#qualification')
	   .setValue('#qualification' , qualification_edit)
	   .clearValue('#specialistIn')
	   .setValue('#specialistIn' , specialist_edit)
	   .clearValue('#address')
	   .setValue('#address' , address_edit)
       .clearValue('#city')
	   .setValue('#city' , city_edit)
	   .clearValue('#zipcode')
	   .setValue('#zipcode' , zip_edit)
	   .pause(300)
	   .click('button[class="btn btn-primary"][type="submit"]')
	   .waitForElementVisible('input[id="Last Name"]' , 60000)
	   .pause(500)
	   .setValue('input[id="Last Name"][class="column_filter"]' , last_edit)
	   .setValue('input[id="First Name"][class="column_filter"]' , first_edit)
	   .setValue('input[id="Email Address"][class="column_filter"]' , email_ID)
	   .setValue('input[id="Specialist In "][class="column_filter"]' , specialist_edit)
	   .pause(500)


	   .click('i[class="fa fa-edit"]')
	   .waitForElementVisible('#firstName' , 60000)
	   .pause(500)
	   .getValue('#firstName' , function(result){
	   	      first_edit_1.push(result.value)
	   })
	   .getValue('#lastName' , function(result){
	   	      last_edit_1.push(result.value)
	   })
	   .getValue('#email' , function(result){
	   	    email_ID_1.push(result.value)
	   })
	   .getValue('#phone' , function(result){
	               	zzz=result.value
                    phone_no_1.push(zzz[1]+zzz[2]+zzz[3]+zzz[6]+zzz[7]+zzz[8]+zzz[10]+zzz[11]+zzz[12]+zzz[13])
	   })
	   
	   .getValue('#qualification' , function(result){
	   	    qualification_edit_1.push(result.value)
	   })
	   .getValue('#specialistIn' , function(result){
	   	    specialist_edit_1.push(result.value)
	   })
	   .getText('#address' , function(result){
	   	    address_edit_1.push(result.value)
	   })
	   .getValue('#city' , function(result){
	   	    city_edit_1.push(result.value)
	   })
	   .getValue('#zipcode' , function(result){
	   	    zip_edit_1.push(result.value)
	   })
	   browser
	     .verify.valueContains('#firstName' , first_edit)
         .verify.valueContains('#lastName' , last_edit)
         .verify.valueContains('#email' , email_ID)
         .verify.valueContains('#phone' , '('+phone_no.toString().substring(0, 3)+') '+phone_no.toString().substring(3, 6)+'-'+phone_no.toString().substring(6, 10))
         .verify.valueContains('#qualification' , qualification_edit)
         .verify.valueContains('#specialistIn' , specialist_edit)
         .verify.containsText('#address' , address_edit)
         .verify.valueContains('#city' , city_edit)
         .verify.valueContains('#zipcode' , zip_edit)
         .pause(500)



},
'Edit JSON':function(browser){
	file.user1[2].username = doctor_username;
file.user1[2].password = doctor_username;

fs.writeFile(fileName, JSON.stringify(file), function (err) {
  if (err) return console.log(err);
  
})
browser
    .end()
},
'Result':''+function(browser){
	browser
        console.log("first_name----------->"+[first_name==first_name_1])
        console.log("last_name------------>"+[last_name==last_name_1])
        console.log("email---------------->"+[email==email_1])
        console.log("phone---------------->"+[phone==phone_1])
        console.log("gender--------------->"+[gender==gender_1])
        console.log("qualification-------->"+[qualification==qualification_1])
        console.log("specialist----------->"+[specialist==specialist_1])
        console.log("address-------------->"+[address==address_1])
        console.log("city----------------->"+[city==city_1])
        console.log("zip------------------>"+[zip==zip_1])
        console.log("last_edit------------>"+[last_edit==last_edit_1])
        console.log("first_edit----------->"+[first_edit==first_edit_1])
        console.log("email_ID------------->"+[email_ID==email_ID_1])
        console.log("phone_no------------->"+[phone_no==phone_no_1])
        console.log("qualification_edit--->"+[qualification_edit==qualification_edit_1])
        console.log("specialist_edit------>"+[specialist_edit==specialist_edit_1])
        console.log("address_edit--------->"+[address_edit==address_edit_1])
        console.log("city_edit------------>"+[city_edit==city_edit_1])
        console.log("zip_edit------------->"+[zip_edit==zip_edit_1])
        
}
}