var Data = require('../EHR_Json/data.json')

var name=[];
var insurance=[];

module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[1].username, Data.user1[1].password)

},
'view files' : function (browser){
      browser
      .pause(1000)      
       .useCss()
       .click('a[class="firstLevel"]')
       .pause(500)
       .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
       .waitForElementVisible('#col0_filter' , 60000)
       .useXpath()
       .pause(200)
       .click("//*[@id='patient']/tbody/tr/td[6]/a/i")
       .useCss()
       .waitForElementVisible('#patient_first_name' , 60000)
       .pause(500)
       .getValue('#patient_last_name' , function(result){
               name.push(result.value)
       })
       .getValue('#patient_first_name' , function(result){
       	      name.push(result.value)
       })
},
'CPI':function(browser){
  browser 
    .useXpath()
    .click("//*[@id='formtab']/a")
    .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000)
    .pause(500)
    .click("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']")
    .useCss()
    .waitForElementVisible('#cpiDate' , 60000)
    .pause(500)
    .getAttribute('#areSymptomsDueToAccident_id' , 'checked' , function(result){
    	if(result.value=="true"){
    		browser
    		  .getValue('#atFaultPersonInsuranceCompany_id' , function(result){
    		  	 insurance.push(result.value)
    		  })
    	}
    })
},
'Admin Form':function(browser){
browser
    .useCss()    
    .click('a[onclick="getAdminDefaultFormList();"]')
    .waitForElementVisible('button[onclick="getFormsList()"]' , 60000)
    .useXpath()
    .pause(1000)
    .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Letter to Patient for Collection of Payment']")
    .pause(1000)
    .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Hardship Agreement']")
    .pause(1000)
    .useXpath()
    .getText("//*[@id='adminDefaultFormsContent']/div[9]/div[2]/span/span" , function(result){
      browser
      .click("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Letter to Patient for Collection of Payment']")
      .useCss()
      .waitForElementVisible('#btnSendPatientForm' , 60000)
      .pause(500)
      .verify.valueContains('#patientNameId' , name.join(" "))
      .useXpath()
      .verify.containsText("//*[@id='letterToPatient']/div[3]/div/div/p[1]/b[1]" , insurance)
         .getText("//*[@id='adminDefaultFormsContent']/p/span[4]/b" , function(result){
         	  browser
         	    .verify.containsText("//*[@id='letterToPatient']/div[3]/div/div/p[1]/b[2]" , result.value)
         })
         if(result.value=="Please Complete"){
          browser
    .useCss()
    .pause(500)
    .getLocationInView('button[class="btn btn-primary hidden-print requestRecHidden uncompletedVisible"][type="submit"]')
    .pause(2000)
    .getLocationInView('#acceptstatement_id')
    .pause(500)
    .useCss()
    .click('button[class="btn btn-primary hidden-print requestRecHidden uncompletedVisible"][type="submit"]')
    .pause(500)
    .verify.visible('#acceptstatement_id_error')
  }
})
  browser
    .getLocationInView('button[class="btn btn-primary hidden-print requestRecHidden uncompletedVisible"][type="submit"]')
    .pause(2000)
    .useXpath()
    .getLocationInView("//*[@id='letterToPatient']/div[3]/div/div/p[1]/b[2]")
    .useCss()
    .pause(500)
    .click('#acceptstatement_id')
    .pause(500)
    .click('button[class="btn btn-primary hidden-print requestRecHidden uncompletedVisible"][type="submit"]')

  
    .waitForElementVisible('button[onclick="getFormsList()"]' , 60000)
    .useXpath()
    .pause(1000)
    .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Letter to Patient for Collection of Payment']")
    .pause(1000)
    .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Hardship Agreement']")
    .pause(1000)
    .click("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Letter to Patient for Collection of Payment']")
    .useCss()
    .waitForElementVisible('#btnSendPatientForm' , 60000)
    .pause(500)
            .verify.visible('input[id="acceptstatement_id"][checked="checked"]')

  }
  }  