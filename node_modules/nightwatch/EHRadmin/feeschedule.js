var Data = require('../EHR_Json/data.json')

var code='99203'
var fee;
var id;
var reset='125'

module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[1].username, Data.user1[1].password)

},
'Billing':function(browser){
	browser
	    .useXpath()
	    .pause(500)
	    .click("//*[@id='mainMenu']/ul/li[4]/a")
	    .pause(300)
	    .useCss()
	    .click('a[href="/EHR/Clinicadmin/ICDCodes"]')
	    .waitForElementVisible('#addnew' , 60000)
	    .pause(500)
},
'Fee Schedule':function(browser){
	fee=Math.floor((Math.random()*901)+100)
	browser
	    .useCss()
	    .click('a[href="/EHR/Clinicadmin/viewFeeSchedule"]')
	    .waitForElementVisible('input[placeholder="Search CPT Codes"]' , 60000)
	    .pause(500)
	    .setValue('input[placeholder="Search CPT Codes"]' , code)
	    .pause(1000)
	    .useCss()
	    .click('a[class="btn btn-primary btn-sm-size"]')
	    .waitForElementVisible('#changedFee_'+code+'' , 60000)
	    .pause(500)
	    .clearValue('#changedFee_'+code+'')
	    .setValue('#changedFee_'+code+'' , fee)
	    .pause(500)
	    .click('a[class="btn btn-primary btn-sm-size"]')
	    .waitForElementNotPresent('#changedFee_'+code+'' , 60000)
	    .pause(500)
	  
},
'Open Patient':function(browser){
	browser
         .useCss()
         .click('a[class="firstLevel"]')
         .pause(500)
         .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
	     .waitForElementVisible('a[onclick="getPatientProfile()"' , 60000)
	     .pause(1000)
	     .getText('td[class="sorting_1"]' , function(result){
	     	  browser
	     	     .pause(500)
	     	     .click('a[onclick="postNavigateToProfile('+result.value+',1);"]')
	     	     id=result.value
	     })
	     .waitForElementVisible('#patient_first_name' , 60000)
	     .pause(500)

},
'Exam Form':function(browser){
	browser
	    .click('a[onclick="doGetTreatments();"]')
	    .waitForElementVisible('button[onclick="openStartTreatment();"]' , 60000)
	    .pause(300)
	    .click('button[onclick="openStartTreatment();"]')
	    .waitForElementVisible('#startTreatmentModal' , 60000)
	    .pause(500)
	    .click('input[name="treatmentType"][value="1"]')
	    .pause(500)
	    .click('button[onclick="doStartTreatment()"]')
	    .waitForElementVisible('button[onclick="openStartTreatment();"]' , 60000)
	    .pause(300)
	    .click('button[onclick="openStartTreatment();"]')
	    .waitForElementVisible('#startTreatmentModal' , 60000)
	    .pause(500)
	    .click('input[name="treatmentType"][value="1"]')
	    .pause(500)
	    .click('button[onclick="doStartTreatment()"]')
	    .waitForElementVisible('button[onclick="openStartTreatment();"]' , 60000)
	    .pause(500)
},
'open treatment 3':function(browser){
	browser
	    .useXpath()
	    .click("//*[@id='treatmentformsContent']/div[4]/span/button")
	    .useCss()
	    .waitForElementVisible('button[onclick="addSoapNotes();"]' , 60000)
	    .pause(500)
	    .useXpath()
	    .click("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 1 -']")
	    .useCss()
	    .waitForElementVisible('#btnExportTreatmentForm' , 60000)
	    .pause(500)
	    .getLocationInView('#areYouWorkingYes_id')
	    .pause(500)
	    .click('button[onclick="return initialExamScreenOneValidation();"]')
	    .pause(500)
	    .isVisible('#initialExamFormId' , function(result){
	    	if(result.value==true){
	    	browser
	    	  .useCss()
	    	  .pause(500)
	    	  .click('#initialExamFormId')
	    	  .pause(500)
	    	  .click('button[onclick="callExamFormFunction()"]')
	    	}
	    })
	    .useXpath()
	    .waitForElementVisible("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 1 -']" , 60000)
	    .pause(500)
	    .getLocationInView("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 8 -']")
	    .pause(500)
	    .getLocationInView("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 5 -']")
	    .pause(500)
	    .click("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 8 -']")
	    .useCss()
	    .waitForElementVisible('#diagnosisOne_id' , 60000)
	    .pause(500)
	    .getLocationInView('#longTermFullActivity_id')
	    .pause(500)
	    .click('button[onclick="return initialExamScreenEightValidation()"]')
	    .pause(500)
	    .useXpath()
	    .waitForElementVisible("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 1 -']" , 60000)
	    .pause(500)
},
'open Billing 1':function(browser){
	browser
	    .useCss()
	    .click('a[onclick="getBillingDetails();"]')
	    .waitForElementVisible('button[onclick="addPayment(1);"]' , 60000)
	    .pause(500)
	    .elements('css selector', 'table#billing tbody tr', function(result) {
           browser
             .useXpath()
             .verify.containsText("//*[@id='billing']/tbody/tr["+result.value.length+"]/td[3]" , fee)
		})
},
'Billing 1':function(browser){
	browser
	    .useXpath()
	    .pause(500)
	    .click("//*[@id='mainMenu']/ul/li[4]/a")
	    .pause(300)
	    .useCss()
	    .click('a[href="/EHR/Clinicadmin/ICDCodes"]')
	    .waitForElementVisible('#addnew' , 60000)
	    .pause(500)
},
'Fee Schedule 1':function(browser){
	browser
	    .useCss()
	    .click('a[href="/EHR/Clinicadmin/viewFeeSchedule"]')
	    .waitForElementVisible('input[placeholder="Search CPT Codes"]' , 60000)
	    .pause(500)
	    .setValue('input[placeholder="Search CPT Codes"]' , code)
	    .pause(1000)
	    .useCss()
	    .click('a[class="btn btn-primary btn-sm-size"]')
	    .waitForElementVisible('#changedFee_'+code+'' , 60000)
	    .pause(500)
	    .clearValue('#changedFee_'+code+'')
	    .setValue('#changedFee_'+code+'' , reset)
	    .pause(500)
	    .click('a[class="btn btn-primary btn-sm-size"]')
	    .waitForElementNotPresent('#changedFee_'+code+'' , 60000)
	    .pause(500)
	  
},
'Open Patient 1':function(browser){
	browser
         .useCss()
         .click('a[class="firstLevel"]')
         .pause(500)
         .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
	     .waitForElementVisible('a[onclick="getPatientProfile()"' , 60000)
	     .pause(500)
	     .click('a[onclick="postNavigateToProfile('+id+',1);"]')
	     .waitForElementVisible('#patient_first_name' , 60000)
	     .pause(500)

},
'Exam Form 1':function(browser){
	browser
	    .click('a[onclick="doGetTreatments();"]')
	    .waitForElementVisible('button[onclick="openStartTreatment();"]' , 60000)
	    .pause(500)
},
'open treatment 4':function(browser){
	browser
	    .useXpath()
	    .click("//*[@id='treatmentformsContent']/div[5]/span/button")
	    .useCss()
	    .waitForElementVisible('button[onclick="addSoapNotes();"]' , 60000)
	    .pause(500)
	    .useXpath()
	    .click("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 1 -']")
	    .useCss()
	    .waitForElementVisible('#btnExportTreatmentForm' , 60000)
	    .pause(500)
	    .getLocationInView('#areYouWorkingYes_id')
	    .pause(500)
	    .click('button[onclick="return initialExamScreenOneValidation();"]')
	    .pause(500)
	    .isVisible('#initialExamFormId' , function(result){
	    	if(result.value==true){
	    	browser
	    	  .useCss()
	    	  .pause(500)
	    	  .click('#initialExamFormId')
	    	  .pause(500)
	    	  .click('button[onclick="callExamFormFunction()"]')
	    	}
	    })
	    .useXpath()
	    .waitForElementVisible("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 1 -']" , 60000)
	    .pause(500)
	    .getLocationInView("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 8 -']")
	    .pause(500)
	    .getLocationInView("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 5 -']")
	    .pause(500)
	    .click("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 8 -']")
	    .useCss()
	    .waitForElementVisible('#diagnosisOne_id' , 60000)
	    .pause(500)
	    .getLocationInView('#longTermFullActivity_id')
	    .pause(500)
	    .click('button[onclick="return initialExamScreenEightValidation()"]')
	    .pause(500)
	    .useXpath()
	    .waitForElementVisible("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 1 -']" , 60000)
	    .pause(500)
},
'open Billing 2':function(browser){
	browser
	    .useCss()
	    .click('a[onclick="getBillingDetails();"]')
	    .waitForElementVisible('button[onclick="addPayment(1);"]' , 60000)
	    .pause(500)
	    .elements('css selector', 'table#billing tbody tr', function(result) {
           browser
             .useXpath()
             .verify.containsText("//*[@id='billing']/tbody/tr["+((result.value.length)-1)+"]/td[3]" , fee)
             .verify.containsText("//*[@id='billing']/tbody/tr["+result.value.length+"]/td[3]" , reset)
		})
		.pause(500)
		.end()
},
}