var Data = require('../EHR_Json/data.json')
var add = require('../EHR_Json/addpatient.json')

var firstname;     var abc1=[];    var first=[];
var lastname;      var abc2=[];    var last=[];
var middlename;                    var middle=[];
var ssn;
var gen;           var gen1=[];    var gen2=[];
var martial;       var martial_1=[];      var martial_2=[];
var email;                         var email_1=[];
var ph1;                           var phone_1=[];
var ph2;                           var phone_2=[];
var address;                       var address_1=[];
var city;                          var city_1=[];
var zip;                           var zip_1=[];
var country_1=[];      var country_2=[];
var state_1=[];         var state_2=[];

module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[1].username, Data.user1[1].password)

},
'open patient files' : function (browser){
      browser
      .pause(1000)      
       .useCss()
       .click('a[class="firstLevel"]')
       .pause(500)
       .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
       .waitForElementVisible('#col0_filter' , 60000)
       
},
'Create new patient': function(browser){
    var a=['Smith' , 'Anderson' , 'Clark' , 'Lopez' , 'Robert' , 'Phillips' , 'Parker' , 'Mark' , 'Kenneth' , 'Adams' , 'Lawrence' , 'Calwin' , 'Alexander' , 
           'Abejundio' , 'Abhiroop' , 'Advaita' , 'Ajaipal' , 'Bankebihari' , 'Bhagwan' , 'Chetan' , 'Dalmeet' , 'Dharamdev' , 'Ekagrah' , 'Fanibhusan']
    var b=['Hernandez' , 'Hall' , 'Lee' , 'Garcia' , 'Moore' , 'Miller' , 'Brown' , 'Morgan' , 'Larson' , 'Byrd' , 'David' , 'Titus' , 'Robin' , 
           'Aidan' , 'Aldrich' , 'Barnard' , 'Bradshaw' , 'Burney' , 'Charleston' , 'Charlie' , 'Darton' , 'Deverell' , 'Edson' , 'Farnley' , 'Garrett']
    firstname=a[Math.floor(Math.random()*a.length)]
    lastname=b[Math.floor(Math.random()*b.length)]
    c=Math.floor((Math.random()*225)+2)
    
    

    browser
    .pause(600)
    .useCss()
    .click('a[class="btn btn-changecolor tooltipsclass"][onclick="getPatientProfile()"]')
    .waitForElementVisible('#firstName' , 60000)
    .pause(500)
    .click('button[onclick="return createPatientProfileValidation();"]')
    .pause(500)
    .verify.visible('#firstNameError')
    .verify.visible('#lastNameError')
    .pause(500)
    .setValue('#firstName' , 'ab')
    

    .setValue('#lastName' , 'ab')
    .pause(500)
    .click('button[onclick="return createPatientProfileValidation();"]')
    .pause(800)
    .verify.containsText('#firstNameError' , 'Should be of length 3')
    .verify.containsText('#lastNameError' , 'Should be of length 3')

    .clearValue('#firstName')
    .setValue('#firstName' , firstname)
    .click('button[onclick="return createPatientProfileValidation();"]')
    .pause(500)
    .verify.hidden("#firstNameError")
    .verify.visible('#lastNameError')
    .pause(500)
    .clearValue('#lastName')
    .setValue('#lastName' , lastname)
     .click('button[onclick="return createPatientProfileValidation();"]')
     .pause(500)

//--------------------------------------------------------------------------------------------------------------
// .useXpath()
// .click("//*[@id='patient']/tbody/tr[1]/td[6]/a")     //click 1st patient
// .waitForElementVisible("//*[@id='patient_first_name']" , 60000)
// .pause(500)
//--------------------------------------------------------------------------------------------------------
  },
  'exam form check':function(browser){
    browser
    .waitForElementVisible('a[onclick="doGetTreatments();"][role="tab"]' , 60000)
    .pause(500)
    .useCss()
    .click('a[onclick="doGetTreatments();"][role="tab"]')
    .useXpath()
    .waitForElementVisible("//*[@id='treatmentformsContent']/div[1]/span[3]/button" , 60000)
    .pause(200)
    .click("//*[@id='treatmentformsContent']/div[1]/span[3]/button")
    .useCss()
    .waitForElementVisible('#alertText' , 60000)
    .verify.visible('#alertText')
    .pause(500)
    .useXpath()
    .click("//*[@id='alertForAdminForm']/div/div/div[3]/button")
    .useCss()
    .verify.visible('a[onclick="openStartTreatment();"]')
    .pause(500)
},
'Patient Intake Form':function(browser){
 browser
    .useCss()
    .pause(500)
    .waitForElementVisible('#patname' , 60000)
    .getLocationInView('#patname')
    .pause(200)
    .click('#formtab')
},
'CPI check':function(browser){
    browser
    .useXpath()
    .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000)
    .pause(500)
    .click("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']")
    .useCss()
    .cpierror()
},
'Profile check':function(browser){
    
    browser
    .useCss()
    .pause(500)
    .getLocationInView('#patname')
    .pause(500)
    .click('a[onclick="getProfile();"][role="tab"]')
    .pause(500)
    .waitForElementVisible('#patient_middle_name' , 60000)
    .pause(500)
    .setValue('#ssn_number' , '3')
    .setValue('#homePhone', '3')
    .setValue('#email', 'g')
    .useXpath()
    .pause(500)
    .click("//*[@id='country']/option[1]")
    .useCss()
    .pause(500)
    .getLocationInView('button[type="submit"]')
    .pause(500)
    .getLocationInView('#address')
    .pause(500)
    .click('button[type="submit"]')
    .pause(500)
    for(i=0; i<add.profil.length; i++){
        browser
        .useCss()
        .verify.visible(add.profil[i])
        .pause(300)
    }
    browser
    .getAttribute('#patient_first_name' , 'value' , function(result){
        abc1.push(result.value)
    })
        .getAttribute('#patient_last_name' , 'value' , function(result){
            abc2.push(result.value)
        })
        browser
        .useCss()
        .setValue('#contact_no' , '5')
        .pause(500)
        .getLocationInView('#patient_middle_name')
        .pause(500)
        .useXpath()
        .click("//*[@id='country']/option["+c+"]")
        .pause(500)
        .useCss()
        .pause(500)
    .getLocationInView('button[type="submit"]')
    .pause(500)
    .getLocationInView('#address')
    .pause(500)
        .click('button[type="submit"]')
        browser
        .pause(500)
        .verify.containsText(add.profil[3] , 'Should be of length 10')
        .pause(500)
        .verify.hidden("#country_error")
        .pause(500)
        .verify.visible('#state_error')
},
'Fill profile':function(browser){
    var d=['Carter' , 'Campbell' , 'Palmer' , 'Aguilar']
    middlename=d[Math.floor(Math.random()*d.length)]
    gen=Math.floor((Math.random()*3)+1)
    martial=Math.floor((Math.random()*3)+1)
    ssn=Math.floor((Math.random()*888888889)+111111111)
    var f1=['patient1@gmail.com' , 'patient2@ymail.com' , 'patient3@yahoo.com' , 'patient4@outlook.com']
    email=f1[Math.floor(Math.random()*f1.length)]
    ph1=Math.floor((Math.random()*1000000000)+9000000000)
    ph2=Math.floor((Math.random()*1000000000)+9000000000)
    var f=["car street" , "gandhi road" , "east lane road"]
    address=f[Math.floor(Math.random()*f.length)]
    country=Math.floor((Math.random()*225)+2)
    var e=["Alabama" , "New Mexico" , "Nebraska"]
    city=e[Math.floor(Math.random()*e.length)]
    zip=Math.floor((Math.random()*88889)+11111)
    console.log('middlename--->'+middlename)
    console.log('gen--->'+gen)
    console.log('martial--->'+martial)
    console.log('ssn--->'+ssn)
    console.log('email--->'+email)
    console.log('ph1--->'+ph1)
    console.log('ph2--->'+ph2)
    console.log('address--->'+address)
    console.log('country--->'+country)
    console.log('city--->'+city)
    console.log('zip--->'+zip)
    browser
     .useCss()
     .pause(500)
     .getLocationInView('#formtab')
     .pause(500)
     .clearValue('#patient_middle_name')
     .setValue('#patient_middle_name' , middlename)
     .clearValue('#ssn_number')
     .setValue('#ssn_number' , ssn)
     .useXpath()
     .click("//*[@id='datetimepicker8']/span")
     .pause(300)
     .click("//*[@id='datetimepicker8']/span")
     .useCss()
     .pause(500)
     .getLocationInView('#patient_last_name')
     .pause(500)
     .useXpath()
     .click("//*[@id='genders']")
     .click("//*[@id='genders']/option["+gen+"]")
     .pause(500)
     .click("//*[@id='marital_status']/option["+martial+"]")
     .useCss()
     .clearValue('#email')
     .setValue('#email' , email)
     .clearValue('#contact_no')
     .setValue('#contact_no' , ph1)
     .clearValue('#homePhone')
     .setValue('#homePhone' , ph2)
     .clearValue('#address')
     .setValue('#address' , address)
     .useXpath()
     .pause(500)
     .getLocationInView("//*[@id='contact_no']")
     .pause(500)
     //.click("//*[@id='country']")
     .click("//*[@id='country']/option["+country+"]")
     .pause(1000)
     .useCss()
     .pause(500)
     .getLocationInView('button[type="submit"]')
     .pause(500)
     .getLocationInView('#date_of_birth')
     .pause(1000)
     .useXpath()
     //.click("//*[@id='state']")
     .click("//*[@id='state']/option[2]")
     .pause(500)
     .useCss()
     .clearValue('#city')
     .setValue('#city' , city)
     .clearValue('#zipcode')
     .setValue('#zipcode' , zip)
     .pause(1000)
     .getLocationInView('#patname')
     .pause(500)
     .getValue('#genders' , function(result){
            gen1.push(result.value)
     })
     .getValue('#marital_status' , function(result){
            martial_1.push(result.value)
     })
     .getValue('#country' , function(result){
           country_1.push(result.value)
        
     })
     .getValue('#state' , function(result){
        state_1.push(result.value)
        
     })
     .pause(500)
     .getLocationInView('button[type="submit"]')
     .pause(500)
     .getLocationInView('#state')
     .pause(500)
     .click('button[type="submit"]')
     .pause(500)

},
'Major or Minor check':function(browser){
    browser
    .useCss()
    .pause(500)
    .getAttribute('#date_of_birth' , 'value' , function(result){
          var birthdate = new Date(result.value);
          var cur = new Date();
          var diff = cur-birthdate; // This is the difference in milliseconds
          var age = Math.floor(diff/31536000000); // Divide by 1000*60*60*24*365
          if(age<18){
            browser
            .useXpath()
            .click("//*[@id='formtab']/a")
            .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000) 
                browser
            .pause(500)
            .verify.elementPresent("//*[@id='formsContent']/div/div/a[text()='Consent to Treat a Minor']")
            
          }
          if(age>=18){
            browser
            .useXpath()
            .click("//*[@id='formtab']/a")
            .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000)
            .pause(500)
            .verify.elementNotPresent("//*[@id='formsContent']/div/div/a[text()='Consent to Treat a Minor']")
              
          }
    })
},
'CPI':function(browser){
     browser
    .useXpath()
    .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000)
    .pause(500)
    .getText("//*[@id='formsContent']/div[3]/div[2]/span" , function(result){
            browser
            .click("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']")
            .useCss()
            .waitForElementVisible('#cpiDate' , 60000)
            .pause(500)
            if(result.value=="Please Complete"){
              browser
            .cpierror()
        }
    })
    .pause(500)
    .getValue('#cpi_dateofbirth' , function(result){
    if(result.value!=""){
    browser
     .pause(500)
     .CPI()
   }
 })
         

},
'Add Exam forms':function(browser){
    browser
    .pause(1000)
    .useCss()
    .click('a[onclick="doGetTreatments();"][role="tab"]')
    .waitForElementVisible('button[class="btn btn-primary btn-sm tooltipsclass"][onclick="openStartTreatment();"]' , 60000)
    for(i=0; i<2; i++){
        browser
    .pause(1000)
    .click('button[class="btn btn-primary btn-sm tooltipsclass"][onclick="openStartTreatment();"]')
    .waitForElementVisible('button[class="btn btn-primary"][onclick="doStartTreatment()"]' , 60000)
    .pause(1000)
    .click('input[value="1"][name="treatmentType"]')
    .pause(1000)
    .click('button[class="btn btn-primary"][onclick="doStartTreatment()"]')
    .pause(1000)
  }
},
'Add Initial Exam':function(browser){
    browser
    .useXpath()
    .click("//*[@id='treatmentformsContent']/div[2]/span/button")
    .pause(500)
    .click("//*[@id='treatmentformsContent']/div[2]/span/button")
    .useCss()
    .waitForElementVisible('#patientName_id' , 60000)
    .pause(500)
    .getLocationInView('button[class="btn btn-primary"][onclick="return initialExamScreenOneValidation();"]')
    .pause(500)
    .getLocationInView('#conditionAffectedYourDailyWork_id')
    .pause(500)
    .click('button[class="btn btn-primary"][onclick="return initialExamScreenOneValidation();"]')
    .waitForElementVisible('input[name="initialExam"][value="1"]' , 60000)
    .pause(500)
    .click('input[name="initialExam"][value="1"]')
    .pause(500)
    .click('button[class="btn btn-primary"][onclick="callExamFormFunction()"]')
    .pause(500)
    .useXpath()
    .waitForElementVisible("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 8 -']" , 60000)
    .pause(500)
    .getLocationInView("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 8 -']")
    .pause(500)
    .getLocationInView("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 6 -']")
    .pause(500)
    .click("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 8 -']")
    .useCss()
    .waitForElementVisible('#diagnosisOne_id' , 60000)
    .pause(500)
    .getLocationInView('button[onclick="return initialExamScreenEightValidation()"][type="submit"]')
    .pause(500)
    .getLocationInView('#other_id')
    .pause(500)
    .click('button[onclick="return initialExamScreenEightValidation()"][type="submit"]')
    .pause(500)
    .useXpath()
     .waitForElementVisible("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 1 -']" , 60000)
     .pause(500)
     .getLocationInView("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 5 -']")
     .pause(1000)
     .verify.visible("//*[@id='treatmentformsContent']/div/a[text()='Radiological Report -']")
     .pause(500)
     .useCss()
     .getLocationInView('#patname')
     .pause(500)
     .click('button[onclick="addSoapNotes();"]')
     .waitForElementVisible('#patient_name' , 60000)
     .pause(500)
     .getLocationInView('button[class="btn btn-primary"][onclick="saveSoapNotes();"]')
     .pause(500)
     .getLocationInView('input[name="frequencyOfCare"]')
     .pause(500)
     .click('button[class="btn btn-primary"][onclick="saveSoapNotes();"]')
     .pause(1000)
     .useXpath()
     .verify.visible("//*[@id='treatmentformsContent']/div/a[text()='SOAP Notes -']")
 },
 'Add Individual Exam':function(browser){
         browser
         
         .pause(1000)
         .useXpath()
         .useCss()
         .click('a[onclick="doGetTreatments();"][role="tab"]')
         .waitForElementVisible('button[class="btn btn-primary btn-sm tooltipsclass"][onclick="openStartTreatment();"]' , 60000)
         .pause(500)
         .useXpath()
         .click("//*[@id='treatmentformsContent']/div[3]/span/button")
         .pause(500)
         .click("//*[@id='treatmentformsContent']/div[2]/span/button")
         .useCss()
         .waitForElementVisible('#patientName_id' , 60000)
         .pause(500)
         .getLocationInView('button[class="btn btn-primary"][onclick="return initialExamScreenOneValidation();"]')
         .pause(500)
         .getLocationInView('#conditionAffectedYourDailyWork_id')
         .pause(500)
         .click('button[class="btn btn-primary"][onclick="return initialExamScreenOneValidation();"]')
         .waitForElementVisible('input[name="initialExam"][value="2"]' , 60000)
         .pause(500)
         .click('input[name="initialExam"][value="2"]')
         .pause(500)
         .click('#ankle')
         .click('#elbow')
         .click('#lumbopelvic')
         .click('#thoracic')
         .click('#cervical')
         .click('#hip')
         .click('#shoulder')
         .click('#wrist')
         .pause(500)
         .click('button[class="btn btn-primary"][onclick="callExamFormFunction()"]')
         .pause(500)
         .useXpath()
         .waitForElementVisible("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 8 -']" , 60000)
         .pause(500)
         .getLocationInView("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 8 -']")
         .pause(500)
         .getLocationInView("//*[@id='treatmentformsContent']/div/a[text()='Thoracic Initial Exam -']")
         .pause(500)
         .click("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 8 -']")
         .useCss()
         .waitForElementVisible('#diagnosisOne_id' , 60000)
         .pause(500)
         .getLocationInView('button[onclick="return initialExamScreenEightValidation()"][type="submit"]')
         .pause(500)
         .getLocationInView('#other_id')
         .pause(500)
         .click('button[onclick="return initialExamScreenEightValidation()"][type="submit"]')
         .pause(500)
         .useXpath()
         .waitForElementVisible("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 1 -']" , 60000)
         .verify.visible("//*[@id='treatmentformsContent']/div/a[text()='Radiological Report -']")
 },
 'Admin forms':function(browser){
    browser
    .pause(1000)
    .useCss()
    .click('a[onclick="getAdminDefaultFormList();"][role="tab"]')
    .waitForElementVisible('button[class="btn btn-primary btn-sm hidden-print tooltipsclass"][onclick="adminlockConfirmation()"]' , 60000)
    .pause(500)
    .useXpath()
    .verify.visible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Health Insurance Verification']")
    .pause(500)
    .useCss()
    .click('button[class="btn btn-primary btn-sm hidden-print tooltipsclass"][onclick="getFormsList()"]')
 },
 'Add Admin Forms':function(browser){
    browser
    .pause(1000)
    .addadminform()
    .pause(1000)
    .verify.visible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Health Insurance Verification']")
    .verify.visible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='X-RAY Release']")
    .verify.visible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Work School Excused Slip']")
    .verify.visible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Hardship Agreement']")
    .verify.visible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Notice and Request to Not Bill Health Insurer']")
    .verify.visible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Notice of Outstanding Bill to Patient']")
    .verify.visible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Letter to Patient for Collection of Payment']")
    .verify.visible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Request Update to Attorney for PI Patient']")
    .verify.visible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Attorney/Adjuster Requesting Fee Reduction']")
    .verify.visible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Narrative Report']")
 },
 'profile check':function(browser){
    browser
    .pause(1000)
    .useCss()
    .click('a[onclick="getProfile();"][role="tab"]')
    .waitForElementVisible('#patient_first_name' , 60000)
    .pause(1000)
    .verify.valueContains('#patient_first_name' , firstname)
    .verify.valueContains('#patient_last_name' , lastname)
    .verify.valueContains('#patient_middle_name' , middlename)
    .verify.valueContains('#genders' , gen1)
    .verify.valueContains('#marital_status' , martial_1)
    .verify.valueContains('#email' , email)
    .verify.valueContains('#contact_no' , '('+ph1.toString().substring(0, 3)+') '+ph1.toString().substring(3, 6)+'-'+ph1.toString().substring(6, 10))
    .verify.valueContains('#homePhone' , '('+ph2.toString().substring(0, 3)+') '+ph2.toString().substring(3, 6)+'-'+ph2.toString().substring(6, 10))
    .verify.containsText('#address' , address)
    .verify.valueContains('#country' , country_1)
    .verify.valueContains('#state' , state_1)
    .verify.valueContains('#city' , city)
    .verify.valueContains('#zipcode' , zip)

 .pause(500)
 .end()
       
}
}
