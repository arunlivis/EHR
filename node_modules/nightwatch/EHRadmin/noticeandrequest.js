var Data = require('../EHR_Json/data.json')

var hospital_name=[];
var mail=[];
var insurance_name=[];

var insu_company;              var insu_company_1=[];
var address;                   var address_1=[];
var Subscriber;                var Subscriber_1=[];

module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[1].username, Data.user1[1].password)

},
'view files' : function (browser){
      browser
      .pause(1000)      
       .useCss()
       .click('a[class="firstLevel"]')
       .pause(500)
       .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
       .waitForElementVisible('#col0_filter' , 60000)
       .useXpath()
       .pause(200)
       .click("//*[@id='patient']/tbody/tr/td[6]/a/i")
       .useCss()
       .waitForElementVisible('#patient_first_name' , 60000)
       .pause(500)
},
'CPI':function(browser){
  browser 
    .useXpath()
    .click("//*[@id='formtab']/a")
    .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000)
    .pause(500)
    .click("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']")
    .useCss()
    .waitForElementVisible('#cpiDate' , 60000)
    .pause(500)
    .getValue('#healthInsuranceName_id' , function(result){
        insurance_name.push(result.value)
    })
},
'Admin Forms':function(browser){
	
	  browser
	      .useCss()
        .pause(1000)
	      .click('a[onclick="getAdminDefaultFormList();"]')
	      .waitForElementVisible('button[onclick="getFormsList()"]' , 60000)
	      .pause(1000)
	      .useXpath()
        .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Notice and Request to Not Bill Health Insurer']")
        .pause(1000)
        .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Work School Excused Slip']")
        .pause(1000)
        .getText("//*[@id='adminDefaultFormsContent']/div[7]/div[2]/span/span" , function(result){
                browser
                    .click("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Notice and Request to Not Bill Health Insurer']")
                    .useCss()
                    .waitForElementVisible('#insuranceCompanyName' , 60000)
                    .pause(500)
                    .useXpath()
          .getText("//*[@id='adminDefaultFormsContent']/p/span[4]/b" , function(result){
               hospital_name.push(result.value)
          })
          .useCss()
          .pause(500)
          .getValue('#clinicFaxNo' , function(result){
               mail.push(result.value)
          })
          .useXpath()
          .pause(1000)
          
          .verify.containsText("//*[@id='noticeOfNotToBill']/div/div[7]/div[4]/span[1]/span" , hospital_name)
          .verify.containsText("//*[@id='noticeOfNotToBill']/div/div[12]/div[3]/span" , hospital_name)
          .verify.containsText("//*[@id='adminDefaultFormsContent']/p/span[4]" , mail)
          .useCss()
          .verify.valueContains('#insuranceCompanyName' , insurance_name)
                      if(result.value=="Please Complete"){
                        browser
                           .pause(500)
                           .useCss()
                           .getLocationInView('#companyNoObjection_id')
                           .pause(2000)
                           .useXpath()
                           .click("//*[@id='noticeOfNotToBill']/div/div[15]/button[1]")
                           .useCss()
                           .pause(1000)
                           .verify.visible('#insuranceCompanyAddress_error')
                           .verify.visible('#subscriberOrEnrolleeNo_error')
                           .verify.visible('#acceptstatement_id_error')
                           .verify.visible('#noticeofnottobillwholeForm_error')
                      }
        })
        var a=['Berkshire Hathaway' , 'Allianz' , 'Zurich Insurance' , 'Nationwide Group' , 'USAA Group']
        insu_company=a[Math.floor(Math.random()*a.length)]
        var b=['north street' , 'car street' , 'gandhi street' , 'united colony']
        address=b[Math.floor(Math.random()*b.length)]
        Subscriber=Math.floor((Math.random()*1000000000)+9000000000)
        browser

          .useCss()
          .pause(500)
          .getLocationInView('button[onclick="getAdminDefaultFormList()"]')
          .pause(500)
          .clearValue('#insuranceCompanyName')
          .setValue('#insuranceCompanyName' , insu_company)
          .clearValue('#insuranceCompanyAddress')
          .setValue('#insuranceCompanyAddress' , address)
          .clearValue('#subscriberOrEnrolleeNo')
          .setValue('#subscriberOrEnrolleeNo' , Subscriber)
          .pause(500)
          .useXpath()
          .getLocationInView("//*[@id='noticeOfNotToBill']/div/div[15]/button[1]")
          .pause(500)
          .useCss()
          .getLocationInView('#subscriberOrEnrolleeNo')
          .pause(500)
          .click('#companyNoObjection_id')
          .click('#acceptstatement_id')
          .pause(500)
          .useXpath()
          .getLocationInView("//*[@id='noticeOfNotToBill']/div/div[15]/button[1]")
          .pause(1000)
          .useCss()
          .getLocationInView('#companyNoObjection_id')
          .pause(500)
          .useXpath()
          .click("html/body/div[1]/section/section/div/div[1]/div[2]/div[8]/div/div[9]/div/div/form/div/div[11]/div/div/input")
          .pause(500)
          .click("//*[@id='noticeOfNotToBill']/div/div[15]/button[1]")
          .waitForElementVisible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Notice and Request to Not Bill Health Insurer']" , 60000)
          .pause(500)
          .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Notice and Request to Not Bill Health Insurer']")
          .pause(1000)
          .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Work School Excused Slip']")
          .pause(1000)
          .click("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Notice and Request to Not Bill Health Insurer']")
          .useCss()
          .waitForElementVisible('#insuranceCompanyName' , 60000)
          .pause(500)
          .verify.valueContains('#insuranceCompanyName' , insu_company)
          .verify.containsText('#insuranceCompanyAddress' , address)
          .verify.valueContains('#subscriberOrEnrolleeNo' , Subscriber)
          .getValue('#insuranceCompanyName' , function(result){
                 insu_company_1.push(result.value)
          })
          .getText('#insuranceCompanyAddress' , function(result){
                 address_1.push(result.value)
          })
          .getValue('#subscriberOrEnrolleeNo' , function(result){
                  Subscriber_1.push(result.value)
          })
          .pause(500)
          .verify.visible('input[id="acceptstatement_id"][checked="checked"]')


          
},
'Result':''+function(browser){
  browser 
      console.log("insu_company--->"+[insu_company==insu_company_1])
      console.log("address-------->"+[address==address_1])
      console.log("Subscriber----->"+[Subscriber==Subscriber_1])
}
}    