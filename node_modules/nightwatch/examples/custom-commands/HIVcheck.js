var symptom=[];
var auto=[];
var work=[];
var other=[];
var insurancetype=[];
var gender=[];
var status=[];
var age;
var accidenttype=[];
var whereu=[];
var name=[]
var exam8=[];
var healthinsuname=[];
var healthinsuno=[];
var faultname;
var faultphone;
var autoname;
var mco=[];
var telephone=[];
var attorneyname=[];
var attorneyph=[];

exports.command = function(){
	this
	   .useCss()
	   .click('a[class="firstLevel"]')
       .pause(500)
       .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
       .waitForElementVisible('#col0_filter' , 60000)
       .pause(200)
       .pause(500)
	   .getText('td[class="sorting_1"]' , function(result){
	   	     this
	   	       .click('a[onclick="postNavigateToProfile('+result.value+',1);"]')
	   	       id=result.value
	   })
       .useCss()
	.waitForElementVisible('#patient_first_name' , 60000 , function(result){
		this
       .pause(500)
       .getValue('#genders' , function(result){
       	  gender.push(result.value)
       })
       .getValue('#marital_status' , function(result){
       	   status.push(result.value)
       })
       .getAttribute('#date_of_birth' , 'value' , function(result){
          var birthdate = new Date(result.value);
          var cur = new Date();
          var diff = cur-birthdate; // This is the difference in milliseconds
          age = Math.floor(diff/31536000000); // Divide by 1000*60*60*24*365
      })
       .pause(500)
       .getValue('#patient_last_name' , function(result){
       	   name.push(result.value)
       })
       .getValue('#patient_first_name' , function(result){
       	   name.push(result.value)
       })
       .getValue('#patient_middle_name' , function(result){
       	   name.push(result.value)
       })
       .pause(500)
       })
//-----------------------------------------------------------------------------------------

      .useXpath()
    .click("//*[@id='formtab']/a")
    .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000 , function(result){
    	this
    .pause(500)
    .click("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']")
    .useCss()
    .waitForElementVisible('#cpiDate' , 60000)
    .pause(500)
   // .getLocationInView('#symptom_description11')
    .pause(500)
    .getAttribute('#areSymptomsDueToAccident_id' , 'checked' , function(result){
    	if(result.value=="true"){
    		symptom.push(1)
           this
           .getAttribute('#auto' , 'checked' , function(result){
           	     if(result.value=="true"){
           	     	 auto.push(1)
           	     	 accidenttype.push(1)
           	     	 this
           	     	 .getValue('#atFaultPersonName_id' , function(result){
               	    faultname=result.value 
               })
           	     	  
           	     	  .getValue('#autoInsurancePhone_id' , function(result){
                           faultphone=result.value
           	     	  })
           	     	  .getValue('#autoInsuranceName_id' , function(result){
           	     	  	     autoname=result.value
           	     	  })
           	     }
           })
               .getAttribute('#work' , 'checked' , function(result){
                         if(result.value=="true"){
               		work.push(1)
               		this
               		.getValue('#autoInsuranceName_id' , function(result){
           	     	  	     autoname=result.value
           	     	  })
               		.getValue('#atFaultPersonName_id' , function(result){
               	    faultname=result.value  
                    })
               		.getValue('#autoInsurancePhone_id' , function(result){
                           faultphone=result.value
           	     	  })
               		.getAttribute('#accidentReported_id' , 'checked' , function(result){
               			if(result.value=="true"){
               				work.push(1)
               				accidenttype.push(2)
               				this
               				         .getAttribute('#accidentReportedWorkers' , 'checked' , function(result){
               			                  if(result.value=="true"){
               			         	       work.push(1)
               			             }
               			
               		})
               			}
           
               		})
           
               	}
               })
               .getAttribute('#other_typeofaccident_id' , 'checked' , function(result){
               	       if(result.value=="true"){
               	       	 other.push(1)
               	       	 accidenttype.push(3)
               	       }
               })
               this
               .getAttribute('#haveRetainedAttorney_id' , 'checked' , function(result){
                     if(result.value=="true"){
                      this
                          .getValue('#attorneyName_id' , function(result){
                               attorneyname.push(result.value)
                          })
                     }
               })
               this
               
               .getValue('#attorneyPhone_id' , function(result){
                    attorneyph.push(result.value)
               })
           }
           this
               .getValue('#insuranceType_id' , function(result){
               	     insurancetype.push(result.value)
               })
    })
    .getValue('#healthInsuranceName_id' , function(result){
    	 healthinsuname.push(result.value)
    })
    .getValue('#healthInsurancePhone_id' , function(result){
    	healthinsuno.push(result.value)
    })
    .pause(800)
    .useXpath()
    .click("//*[@id='formtab']/a")
    
    })
//------------------------------------------------------------------------------------------------------------------------
this
      .useXpath()
    .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000 , function(result){
    	this
    .pause(500)    
         if((accidenttype.map(Number)).indexOf(1) > -1){
    	this
    	.useXpath()
    	.pause(1000)
    	.getLocationInView("//*[@id='formsContent']/div/div/a[text()='Auto Accident Questionnaire']")
    	.pause(2500)
    	.getLocationInView("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']")
    	.pause(1000)
    	.click("//*[@id='formsContent']/div/div/a[text()='Auto Accident Questionnaire']")
    	.useCss()
    	.waitForElementVisible('#claimNumberid' , 60000)
    	.pause(500)
    	.getAttribute('#Driverid' , 'checked' , function(result){
               if(result.value=="true"){
               	 whereu.push(1)
               }
    	})
    	.getAttribute('#FrontSeatPassengerid' , 'checked' , function(result){
               if(result.value=="true"){
               	 whereu.push(2)
               }
    	})
    	.getAttribute('#BackSeatPassengerid' , 'checked' , function(result){
               if(result.value=="true"){
               	 whereu.push(3)
               }
    	})
    }

    if((accidenttype.map(Number)).indexOf(2) > -1){
    	this
    	.useXpath()
    	.pause(1000)
    	.click("//*[@id='formtab']/a")
    	
    	.waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000)
    	.pause(1000)
    	.getLocationInView("//*[@id='formsContent']/div/div/a[text()='Work Accident Questionnaire']")
    	.pause(2500)
    	.getLocationInView("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']")
    	.pause(1000)
    	.click("//*[@id='formsContent']/div/div/a[text()='Work Accident Questionnaire']")
    	.useCss()
    	.waitForElementVisible('button[onclick="getDefaultFormList()"]' , 60000)
    	.pause(500)
    	.getValue('#nameOfMcoid' , function(result){
    		mco.push(result.value)
    	})
    	.getValue('#telephoneid' , function(result){
    		telephone.push(result.value)
    	})
    }
    })
//-------------------------------------------------------------------------------------------------------------------------------------
this
         .useCss()
	.pause(1000)
	.click('a[onclick="doGetTreatments();"]')
	.waitForElementVisible('button[onclick="openStartTreatment();"]' , 60000 , function(result){
		this
	.pause(500)
	.useXpath()
	.click("//*[@id='treatmentformsContent']/div[3]/a")
	.useCss()
	.waitForElementVisible('button[onclick="addSoapNotes();"]' , 60000)
	.pause(1000)
	.useXpath()
	.getLocationInView("//*[@id='treatmentformsContent']/div/a[text()='Thoracic Initial Exam -']")
	.pause(1000)
	.click("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 8 -']")
	.useCss()
	.pause(1000)
	.waitForElementVisible('button[onclick="gobackExamsList()"]' , 60000)
	//.getLocationInView('#assessment1_id')
	.pause(500)
	for(i=0 ; i<12; i++){
		var aa=["#diagnosisOne_id" , "#diagnosisTwo_id" , "#diagnosisThree_id" , "#diagnosisFour_id" , "#diagnosisFive_id",
		        "#diagnosisSix_id" , "#diagnosisSeven_id" , "#diagnosisEight_id" , "#diagnosisNine_id" , "#diagnosisTen_id",
		        "#diagnosisElevan_id" , "#diagnosisTwelve_id"]
		this
		.useCss()
		  .getValue(aa[i] , function(result){
             exam8.push(result.value)
		  })
	}    
	})
//-----------------------------------------------------------------------------------------------------------------------------------------
this
       .useCss()
	.click('a[onclick="getAdminDefaultFormList();"]')
	.waitForElementVisible('button[onclick="getFormsList()"]' , 60000 , function(result){
		this
	.pause(1000)
	.useXpath()
	.getText("//*[@id='adminDefaultFormsContent']/div[3]/div[2]/span/span" , function(result){
		this
	.useXpath()
	.pause(1000)
	.click("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Health Insurance Verification']")
	.useCss()
	.waitForElementVisible('#insuranceTypeDivId' , 60000)
	.pause(500)
	if(result.value=="Please Complete"){
	if((auto.map(Number)).indexOf(1) > -1 && symptom.length==1){
		this
		.verify.elementPresent('input[id="insuranceType_id"][checked="checked"]')
	}
	if(work.length==3 && auto.length==0 && symptom.length==1){
		this
		.verify.elementPresent('input[name="insuranceType"][value="2"][checked="checked"]')
	}
	if(other.length==1 && (insurancetype.map(Number)).indexOf(1) > -1){
		this
		.verify.elementPresent('input[name="insuranceType"][value="3"][checked="checked"]')
	}
	if(other.length==1 && (insurancetype.map(Number)).indexOf(2) > -1){
		this
		.verify.elementPresent('input[name="insuranceType"][value="4"][checked="checked"]')
	}
	if(other.length==1 && (insurancetype.map(Number)).indexOf(3) > -1){
		this
		.verify.elementPresent('input[name="insuranceType"][value="5"][checked="checked"]')
	}
	if(other.length==1 && (insurancetype.map(Number)).indexOf(0) > -1 || other.length==1 && (insurancetype.map(Number)).indexOf(4) > -1){
		this
		.verify.elementPresent('input[name="insuranceType"][value="6"][checked="checked"]')
	}
	if((gender.map(Number)).indexOf(1) > -1 ){
	this
		   .verify.elementPresent('input[id="mr_id"][value="1"][checked="checked"]')
	}
	else if((gender.map(Number)).indexOf(2) > -1 && (status.map(Number)).indexOf(1) > -1){
		this
		   .verify.elementPresent('input[name="mr"][value="3"][checked="checked"]')
	}
	else if(((gender.map(Number)).indexOf(2) > -1 || (gender.map(Number)).indexOf(3) > -1)&& ((status.map(Number)).indexOf(2) > -1 || (status.map(Number)).indexOf(3) > -1)){
		this
		   .verify.elementPresent('input[name="mr"][value="2"][checked="checked"]')
	}
	if(age<18){
		this
		   .verify.elementPresent('input[name="patientsRelationship"][value="3"][checked="checked"]')
	}
	else if(age>=18 && (accidenttype.map(Number)).indexOf(1) > -1 && ((whereu.map(Number)).indexOf(2) > -1 || (whereu.map(Number)).indexOf(3) > -1 ) ){
        this
		   .verify.elementPresent('input[name="patientsRelationship"][value="4"][checked="checked"]')
	}
	else if(age>=18 && (accidenttype.map(Number)).indexOf(1) > -1 && (whereu.map(Number)).indexOf(1) > -1 ){
        this
		   .verify.elementPresent('input[name="patientsRelationship"][value="5"][checked="checked"]')
	}else{
		this
		   .verify.elementPresent('input[name="patientsRelationship"][value="6"][checked="checked"]')
	}
	for(i=0 ; i<12; i++){
		var bb=["input[name=diagnosisOne]" , "input[name=diagnosisTwo]" , "input[name=diagnosisThree]" , "input[name=diagnosisFour]" , "input[name=diagnosisFive]",
		        "input[name=diagnosisSix]" , "input[name=diagnosisSeven]" , "input[name=diagnosisEight]" , "input[name=diagnosisNine]" , "input[name=diagnosisTen]",
		        "input[name=diagnosisElevan]" , "input[name=diagnosisTwelve]"]
		this
	   .verify.valueContains(bb[i] , exam8[i])
	}
	this
	.verify.valueContains('input[name="attorneyName"]' , attorneyname)
	if(other==1){
		this
	     .verify.valueContains('#adjusterPhone_id' , healthinsuno)
	     
     }
     if(auto==1  ||  work==1){
     	this
     	 .verify.valueContains('#adjusterPhone_id' , faultphone)
	    // .verify.valueContains('input[name="attorneyName"]' , faultname)
	     .verify.valueContains('#insurancecompany_id' , autoname)
     }
     this
	.verify.valueContains('#attorneyPhone_id' , attorneyph)
	.verify.valueContains('#contactPersonName_id' , name.join(" "))
	.verify.valueContains('#patientNameid' , name.join(" "))
	
	.getAttribute('input[name="insuranceType"][value="1"]' , 'checked' , function(result){
		if(result.value=="true"){
			this 
			.verify.valueContains('#insuredname_id' , faultname)
		}
	})
	.getAttribute('input[name="insuranceType"][value="2"]' , 'checked' , function(result){
		if(result.value=="true"){
			this 
			.verify.valueContains('#insuredname_id' , name.join(" "))
			.verify.valueContains('#insuranceCompany1_id' , mco)
	         .verify.valueContains('#adjusterPhone1_id' , telephone)
		}
	})
	.getAttribute('input[name="insuranceType"][value="3"]' , 'checked' , function(result){
		if(result.value=="true"){
			this
			 .verify.valueContains('#insuredname_id' , name.join(" "))
			 .verify.valueContains('#insuranceCompany1_id' , healthinsuname)
	         .verify.valueContains('#adjusterPhone1_id' , healthinsuno)
		}
	})
	.getAttribute('input[name="insuranceType"][value="4"]' , 'checked' , function(result){
		if(result.value=="true"){
			this
			 .verify.valueContains('#insuredname_id' , name.join(" "))
			 .verify.valueContains('#insuranceCompany1_id' , healthinsuname)
	         .verify.valueContains('#adjusterPhone1_id' , healthinsuno)
		}
	})
	.getAttribute('input[name="insuranceType"][value="5"]' , 'checked' , function(result){
		if(result.value=="true"){
			this
			 .verify.valueContains('#insuredname_id' , name.join(" "))
			 .verify.valueContains('#insuranceCompany1_id' , healthinsuname)
	         .verify.valueContains('#adjusterPhone1_id' , healthinsuno)
		}
	})
	.getAttribute('input[name="insuranceType"][value="6"]' , 'checked' , function(result){
		if(result.value=="true"){
			this
			 .verify.valueContains('#insuredname_id' , 'Uninsured')
			 .verify.valueContains('#insuranceCompany1_id' , 'Uninsured')
		}
	})
	.pause(500)
	.getLocationInView('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
	.pause(500)
	.getLocationInView('#benefits_type1')
	.pause(500)
	.click('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
	.pause(300)
	.verify.visible('#spokewithid_error')
	.verify.visible('#group_id_error')
	.verify.visible('#mailClaims_id_error')
	.verify.visible('#payerId_id_error')
	.verify.visible('#mailClaimsZip_id_error')
	.verify.visible('#policyNumber1_id_error')
	.verify.visible('#group1_id_error')
	.verify.visible('#mailClaims1_id_error')
	.verify.visible('#typeOfBenefits_id_error')
	.verify.visible('#acceptstatement_id_error')
	.verify.visible('#HIVwholeForm_error')
        }
	})	
})
//------------------------------------------------------------------------------------------------------------------------------
}