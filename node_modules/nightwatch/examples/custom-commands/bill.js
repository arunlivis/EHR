var cervical=[];
var thoracic=[];
var lumbar=[];

exports.command = function(cpt_code){
	ba=['cervicalApLower' , 'cervicalApom' , 'cervicalLLateral' , 'cervicalRlf' , 'cervicalLlf' , 'cervicalRpo' , 'cervicalLpo' , 'cervicalFlex' , 'cervicalExt']
   this
	for(i=0; i<ba.length; i++){
		var a1=(function(){
        var j=i
        return function(result){
            if(result.value=="true"){
                   cervical.push(1)
          }
        }})()
        this
      .getAttribute('input[name="'+ba[i]+'"][value="1"]' , 'checked' , a1)
	}


	bb=['thoracicAp' , 'thoracicLLateral' , 'thoracicRlf' , 'thoracicLlf' , 'thoracicRpo' , 'thoracicLpo' , 'thoracicPaChest' , 'thoracicLateralChest']

	for(i=0; i<bb.length; i++){
		var a2=(function(){
        var j=i
        return function(result){
            if(result.value=="true"){
                   thoracic.push(1)
          }
        }})()
        this
      .getAttribute('input[name="'+bb[i]+'"][value="1"]' , 'checked' , a2)
	}


	bc=['lumbarApLower' , 'lumbarLLateral' , 'lumbarRlf' , 'lumbarLlf' , 'lumbarRpo' , 'lumbarLpo']

	for(i=0; i<bc.length; i++){
		var a3=(function(){
        var j=i
        return function(result){
            if(result.value=="true"){
                   lumbar.push(1)
          }
        }})()
        this
      .getAttribute('input[name="'+bc[i]+'"][value="1"]' , 'checked' , a3)
	}

	this
	.pause(500)
	.useCss()
    .waitForElementVisible('#btnExportTreatmentForm' , 60000 , function(result){
    	sum_4 = (cervical.map(Number)).reduce(function(a, b) { return a + b; }, 0);
        sum_5 = (thoracic.map(Number)).reduce(function(a, b) { return a + b; }, 0);
        sum_6 = (lumbar.map(Number)).reduce(function(a, b) { return a + b; }, 0);

        if(sum_4=='1'){
        	     cpt_code.push('72020')
        }
        if(sum_4=='2'){
        	for(i=0; i<2 ; i++){
        	     cpt_code.push('72020')
            }
        }
        if(sum_4=='3'){
        	cpt_code.push('72040')
        }
        if(sum_4==4){
        	     cpt_code.push('72040')
        	     cpt_code.push('72020')
        }
        if(sum_4=='5'){
        	cpt_code.push('72050')
        }
        if(sum_4=='6'){
        	     cpt_code.push('72050')
        	     cpt_code.push('72020')
        }
        if(sum_4=='7'){
        	cpt_code.push('72052')
        }
        if(sum_4=='8'){
        	    cpt_code.push('72052')
        	     cpt_code.push('72020')
        }
        if(sum_4=='9'){
        	     cpt_code.push('72052')
        	     cpt_code.push('72020')
        	     cpt_code.push('72020')
        }
        //------------------------------------------------------------
        if(sum_5=='1'){
        	cpt_code.push('72020')
        }
        if(sum_5=='2'){
        	cpt_code.push('72070')
        }
        if(sum_5=='3'){
        	   cpt_code.push('72070')
        	   cpt_code.push('72020')
        }
        if(sum_5=='4'){
        	cpt_code.push('72074')
        }
        if(sum_5==5){
        	   cpt_code.push('72074')
        	   cpt_code.push('72020')
        }
        if(sum_5=='6'){
        	cpt_code.push('72074')
        	for(i=0; i<2 ; i++){
        	   cpt_code.push('72020')
            }
        }
        if(sum_5=='7'){
        	cpt_code.push('72074')
        	for(i=0; i<3 ; i++){
        	   cpt_code.push('72020')
            }
        }
        if(sum_5=='8'){
        	cpt_code.push('72074')
        	for(i=0; i<4 ; i++){
        	   cpt_code.push('72020')
            }
        }
        //-------------------------------------------------------
        if(sum_6=='1'){
        	    cpt_code.push('72020')
        }
        if(sum_6=='2'){
        	cpt_code.push('72100')
        }
        if(sum_6=='3'){
        	    cpt_code.push('72100')
        	    cpt_code.push('72020')
        }
        if(sum_6=='4'){
        	cpt_code.push('72110')
        }
        if(sum_6=='5'){
        	cpt_code.push('72110')
        	    cpt_code.push('72020')
        }
        if(sum_6=='6'){
        	cpt_code.push('72110')
        	for(i=0; i<2 ; i++){
        	    cpt_code.push('72020')
            }
        }
        //----------------------------------------------------
    })

}