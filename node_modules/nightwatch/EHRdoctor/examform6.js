var Data = require('../EHR_Json/data.json')
var thoracic_myotomes=[].sort();  var aa1=[];  var tho=[];
var myotomes=[].sort();           var aa2=[];  var myo=[];
var present=[].sort();            var aa3=[];  var pre=[];
var visual=[].sort();             var aa4=[];  var vis=[];
var cervical_c5right=[];   var a;
var cervical_c5left=[];    var f;
var cervical_c6right=[];   var b;
var cervical_c6left=[];    var g;
var cervical_c7right=[];   var c;
var cervical_c7left=[];    var h;
var cervical_c8right=[];   var d;
var cervical_c8left=[];    var j;
var cervical_t1right=[];   var e;
var cervical_t1left=[];    var k;
var deep_c5tight=[];       var l;
var deep_c5left=[];        var o;
var deep_c6right=[];       var m;
var deep_c6left=[];        var p;
var deep_c7right=[];       var n;
var deep_c7left=[];        var q;
var text=[];               var t1=[];
var lumbar_l2right=[];     var u;
var lumbar_l2left=[];      var y;
var lumbar_l3right=[];     var v;
var lumbar_l3left=[];      var z;
var lumbar_l4right=[];     var w;
var lumbar_l4left=[];      var aa;
var lumbar_l5right=[];     var x;
var lumbar_l5left=[];      var ab;
var lumbar_heelright=[];   var ac;
var lumbar_heelleft=[];    var ae;
var lumbar_toeright=[];    var ad;
var lumbar_toeleft=[];     var af;
var deep_Patellarright=[]; var ag;
var deep_Patellarleft=[];  var aj;
var deep_Achillesright=[]; var ah;
var deep_Achillesleft=[];  var ak;
var deep_UMNLright=[];     var al;
var deep_UMNLleft=[];      var am;
var others1=[];   var oth1=[];
var abcz;
var t;

var id;

module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[2].username, Data.user1[2].password)

},
'Patient' : function(browser){
	browser  
	   .useCss()
	   .pause(500)
	   .click('a[class="firstLevel"][href="#"]')
	   .pause(300)
	   .click('a[href="/EHR/Doctor/view-patient-details-open"]')
	   .waitForElementVisible('#col0_filter' , 60000)
	   .pause(500)
     .waitForElementVisible('td[class="sorting_1"]' , 60000)
     .pause(500)
	   .getText('td[class="sorting_1"]' , function(result){
	   	  id=result.value
	   	    browser
	   	       .useCss()
	   	       .click('a[onclick="postNavigateToProfile('+result.value+',1);"]')
	   })
	   .waitForElementVisible('button[onclick="openStartTreatment();"]' , 60000)
	   .pause(500)
},
'Exam Form 6':function(browser){	
   browser   
	    .useXpath()
	    .click("//*[@id='treatmentformsContent']/div[2]/span/button")
	    .useCss()
	    .waitForElementVisible('button[onclick="addSoapNotes();"]' , 60000)
	    .pause(1500)
	    .useXpath()
	    .getLocationInView("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 6 -']")
        .pause(1500)
        .getLocationInView("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 4 -']")
        .pause(1000)
        .click("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 6 -']")
        .useCss()
	    .waitForElementVisible('button[onclick="gobackExamsList()"]' , 60000)
	    .pause(500)
        .exam6(thoracic_myotomes,myotomes,present,visual)
        .pause(500)
        .useCss()
        .getLocationInView('#cardioRespiratoryExam_id')
        .pause(500)
        .useXpath()
        .getLocationInView("//*[@id='formid']/div/div[1]/div/input")
        .pause(500)
            a=Math.floor((Math.random()*6)+1)
            b=Math.floor((Math.random()*6)+1)
            c=Math.floor((Math.random()*6)+1)
            d=Math.floor((Math.random()*6)+1)
	        e=Math.floor((Math.random()*6)+1)
              browser
                 .useCss()
                 .click('input[name="deltoidC5Right"][value="'+a+'"]')
                 .click('input[name="wristExtC6Right"][value="'+b+'"]')
                 .click('input[name="wristFlexC7Right"][value="'+c+'"]')
                 .click('input[name="fingerFlexC8Right"][value="'+d+'"]')
                 .click('input[name="fingerAddT1Right"][value="'+e+'"]')

        f=Math.floor((Math.random()*6)+1)
        g=Math.floor((Math.random()*6)+1)
        h=Math.floor((Math.random()*6)+1)
        j=Math.floor((Math.random()*6)+1)
        k=Math.floor((Math.random()*6)+1)
  browser
        .useCss()
        .click('input[name="deltoidC5Left"][value="'+f+'"]')
        .click('input[name="wristExtC6Left"][value="'+g+'"]')
        .click('input[name="wristFlexC7Left"][value="'+h+'"]')
        .click('input[name="fingerFlexC8Left"][value="'+j+'"]')
        .click('input[name="fingerAddT1Left"][value="'+k+'"]')
        
       l=Math.floor((Math.random()*5)+1)
       m=Math.floor((Math.random()*5)+1)
       n=Math.floor((Math.random()*5)+1)
  browser
        .useCss()
        .click('input[name="bicepC56Right"][value="'+l+'"]')
        .click('input[name="bracioC67Right"][value="'+m+'"]')
        .click('input[name="tricepC78Right"][value="'+n+'"]')
        

        o=Math.floor((Math.random()*5)+1)
        p=Math.floor((Math.random()*5)+1)
        q=Math.floor((Math.random()*5)+1)
  browser
        .useCss()
        .click('input[name="bicepC56Left"][value="'+o+'"]')
        .click('input[name="bracioC67Left"][value="'+p+'"]')
        .click('input[name="tricepC78Left"][value="'+q+'"]')
        

        .useCss()
        .pause(500)
        .getLocationInView('#toeWalkS12Right1_id')
        .pause(500)
        .getLocationInView('#tricepC78Right1_id')
        .pause(500)


        for(i=0; i<2; i++){
          r=Math.floor((Math.random()*2)+1)
          s=Math.floor((Math.random()*2)+1)
          thoracic_myotomes.push(r)
          myotomes.push(s)
          not_1=['myotomesRuq' , 'myotomesLuq']
          not_2=['myotomesRlq' , 'myotomesLlq']
          browser
          .useCss()
          .click('input[name="'+not_1[r-1]+'"][value="1"]')
          .click('input[name="'+not_2[s-1]+'"][value="1"]')
          
        }
        for(i=0; i<1; i++){
        var ss=['cardio' , 'respiratory' , 'exam']
        t=ss[Math.floor(Math.random()*ss.length)]
        browser
        .useCss()
        .clearValue('#cardioRespiratoryExam_id')
        .setValue('#cardioRespiratoryExam_id' , t)
        if(t=="cardio"){
          t1.push(0)
        }
        if(t=="respiratory"){
          t1.push(1)
        }
        if(t=="exam"){
          t1.push(2)
        }
      }

           u=Math.floor((Math.random()*6)+1)
           v=Math.floor((Math.random()*6)+1)
           y=Math.floor((Math.random()*6)+1)
           z=Math.floor((Math.random()*6)+1)
        browser
          .useCss()
          .click('input[name="hipFlexL2Right"][value="'+u+'"]')
          .click('input[name="legExtL3Right"][value="'+v+'"]')
          .click('input[name="hipFlexL2Left"][value="'+y+'"]')
          .click('input[name="legExtL3Left"][value="'+z+'"]')

          aa=Math.floor((Math.random()*6)+1)
          ab=Math.floor((Math.random()*6)+1)
          w=Math.floor((Math.random()*6)+1)
          x=Math.floor((Math.random()*6)+1)
        browser
        .useCss()
        .pause(1000)
        .getLocationInView('#dorsiflexL4Right1_id')
        .pause(1000)
        .getLocationInView('#cardioRespiratoryExam_id')
        .pause(1000)  
        .click('input[name="dorsiflexL4Right"][value="'+w+'"]')
        .click('input[name="digitFlexL5Right"][value="'+x+'"]')
        .click('input[name="dorsiflexL4Left"][value="'+aa+'"]')
        .click('input[name="digitFlexL5Left"][value="'+ab+'"]')
        
          .pause(1500)
          .useCss()
          .getLocationInView('#visualid')
          .pause(1500)
          .getLocationInView('#dorsiflexL4Right1_id')
          .pause(1500)
          ac=Math.floor((Math.random()*2)+1)
          ad=Math.floor((Math.random()*2)+1)
          ae=Math.floor((Math.random()*2)+1)
          af=Math.floor((Math.random()*2)+1)
          browser
          .useCss()
          .click('input[name="heelWalkL45Right"][value="'+ac+'"]')
          .click('input[name="toeWalkS12Right"][value="'+ad+'"]')
          .click('input[name="heelWalkL45Left"][value="'+ae+'"]')
          .click('input[name="toeWalkS12Left"][value="'+af+'"]')
          
          ag=Math.floor((Math.random()*6)+1)
          ah=Math.floor((Math.random()*6)+1)
          aj=Math.floor((Math.random()*6)+1)
          ak=Math.floor((Math.random()*6)+1)
          browser
          .useCss()
          .click('input[name="patellarL234Right"][value="'+ag+'"]')
          .click('input[name="achillesL5Right"][value="'+ah+'"]')
          .click('input[name="patellarL234Left"][value="'+aj+'"]')
          .click('input[name="achillesL5Left"][value="'+ak+'"]')
          
          al=Math.floor((Math.random()*2)+1)
           am=Math.floor((Math.random()*2)+1)
          browser
          .useCss()
          .click('input[name="babinskiRight"][value="'+al+'"]')
          .click('input[name="babinskiLeft"][value="'+am+'"]')
         

         for(i=0; i<1; i++){
            present.push(1)
            browser
            .useCss()
            .click('#visualid')
            .pause(500)
          .isVisible('#visuaDisturbanceText_id' , function(result) {
            if(result.value==true){
               var abc=['eye exam' , 'auscultate' , 'carotid' , 'arterie']
               abcz=abc[Math.floor(Math.random()*abc.length)]
               //others1.push(abcz)
               browser
               .clearValue('#visuaDisturbanceText_id')
               .setValue('#visuaDisturbanceText_id' , abcz)
               if(abcz=='eye exam'){
                 others1.push(1)
               }
               if(abcz=='auscultate'){
                 others1.push(2)
               }
               if(abcz=='carotid'){
                 others1.push(3)
               }
               if(abcz=='arterie'){
                 others1.push(4)
               }
             }
           })
            
        }


        for(i=0; i<2;i++){
            an=Math.floor((Math.random()*2)+1)
            visual.push(an)
            not_2=['lumberVisualDisturbanceRight' , 'lumberVisualDisturbanceLeft']
            browser
            .useCss()
            .click('input[name="'+not_2[an-1]+'"][value="1"]')
          }

         browser
          .pause(500)
          .useCss()
          .getLocationInView('button[class="btn btn-primary"][type="submit"]')
          .pause(500)
          .useCss()
          .getLocationInView('#visualid')
          .pause(500)
          .click('button[class="btn btn-primary"][type="submit"]')
          .useXpath()
          .pause(1500)
          .getLocationInView("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 8 -']")
          .pause(1500)
          .getLocationInView("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 3 -']")
          .pause(1500)
          .click("//*[@id='treatmentformsContent']/div/a[text()='Initial Exam Screen 6 -']")
          .useCss()
	      .waitForElementVisible('button[onclick="gobackExamsList()"]' , 60000)
	      .pause(500)
        
    }, 
 'check':function(browser){
  browser
thoracic_myotomes.sort();

var current = null;
var cnt = 0;
for (var i = 0; i < thoracic_myotomes.length; i++) {
    if (thoracic_myotomes[i] != current) {
        if (cnt > 0) {
           // console.log(current + ' comes --> ' + cnt + ' times<br>');
            if(cnt % 2 == 1){
      tho.push(current)
    }
        }
        current = thoracic_myotomes[i];
        cnt = 1;
    } else {
        cnt++;
    }
}
if (cnt > 0) {
   // console.log(current + ' comes --> ' + cnt + ' times');
    if(cnt % 2 == 1){
      tho.push(current)
    }
}

//-------------------------------------------------------------------------------------------
myotomes.sort();

var current = null;
var cnt = 0;
for (var i = 0; i < myotomes.length; i++) {
    if (myotomes[i] != current) {
        if (cnt > 0) {
           // console.log(current + ' comes --> ' + cnt + ' times<br>');
            if(cnt % 2 == 1){
      myo.push(current)
    }
        }
        current = myotomes[i];
        cnt = 1;
    } else {
        cnt++;
    }
}
if (cnt > 0) {
   // console.log(current + ' comes --> ' + cnt + ' times');
    if(cnt % 2 == 1){
      myo.push(current)
    }
}

//-------------------------------------------------------------------------------------------
present.sort();

var current = null;
var cnt = 0;
for (var i = 0; i < present.length; i++) {
    if (present[i] != current) {
        if (cnt > 0) {
           // console.log(current + ' comes --> ' + cnt + ' times<br>');
            if(cnt % 2 == 1){
      pre.push(current)
    }
        }
        current = present[i];
        cnt = 1;
    } else {
        cnt++;
    }
}
if (cnt > 0) {
   // console.log(current + ' comes --> ' + cnt + ' times');
    if(cnt % 2 == 1){
      pre.push(current)
    }
}

//-------------------------------------------------------------------------------------------
visual.sort();

var current = null;
var cnt = 0;
for (var i = 0; i < visual.length; i++) {
    if (visual[i] != current) {
        if (cnt > 0) {
           // console.log(current + ' comes --> ' + cnt + ' times<br>');
            if(cnt % 2 == 1){
      vis.push(current)
    }
        }
        current = visual[i];
        cnt = 1;
    } else {
        cnt++;
    }
}
if (cnt > 0) {
   // console.log(current + ' comes --> ' + cnt + ' times');
    if(cnt % 2 == 1){
      vis.push(current)
    }
}

//-------------------------------------------------------------------------------------------
browser
  .pause(500)
  .examform6(cervical_c5right, cervical_c5left, cervical_c6right, cervical_c6left, cervical_c7right, cervical_c7left, cervical_c8right, cervical_c8left, 
          cervical_t1right, cervical_t1left, deep_c5tight, deep_c5left, deep_c6right, deep_c6left, deep_c7right, deep_c7left, aa1, aa2, text, lumbar_l2right, 
          lumbar_l2left, lumbar_l3right, lumbar_l3left, lumbar_l4right, lumbar_l4left, lumbar_l5right, lumbar_l5left, lumbar_heelright, lumbar_heelleft, 
          lumbar_toeright, lumbar_toeleft, deep_Patellarright, deep_Patellarleft, deep_Achillesright, deep_Achillesleft, deep_UMNLright, deep_UMNLleft ,aa3 ,
          aa4, oth1,a,f,b,g,c,h,d,j,e,k,l,o,m,p,n,q,u,y,v,z,w,aa,x,ab,ac,ae,ad,af,ag,aj,ah,ak,al,am,tho,myo,pre,abcz,vis,t)
  .pause(500)
  .end()
},
'Result':''+ function (browser){
  browser
  console.log("thoracic_myotomes--->"+[JSON.stringify(aa1.sort())==JSON.stringify(tho.sort())])
  console.log("myotomes------------>"+[JSON.stringify(aa2.sort())==JSON.stringify(myo.sort())])
  console.log("present------------->"+[JSON.stringify(aa3.sort())==JSON.stringify(pre.sort())])
  console.log("visual-------------->"+[JSON.stringify(aa4.sort())==JSON.stringify(vis.sort())])
  console.log("cervical_c5right---->"+(cervical_c5right==a))
  console.log("cervical_c5left----->"+(cervical_c5left==f))
  console.log("cervical_c6right---->"+(cervical_c6right==b))
  console.log("cervical_c6left----->"+(cervical_c6left==g))
  console.log("cervical_c7right---->"+(cervical_c7right==c))
  console.log("cervical_c7left----->"+(cervical_c7left==h))
  console.log("cervical_c8right---->"+(cervical_c8right==d))
  console.log("cervical_c8left----->"+(cervical_c8left==j))
  console.log("cervical_t1right---->"+(cervical_t1right==e))
  console.log("cervical_t1left----->"+(cervical_t1left==k))
  console.log("deep_c5tight-------->"+(deep_c5tight==l))
  console.log("deep_c5left--------->"+(deep_c5left==o))
  console.log("deep_c6right-------->"+(deep_c6right==m))
  console.log("deep_c6left--------->"+(deep_c6left==p))
  console.log("deep_c7right-------->"+(deep_c7right==n))
  console.log("deep_c7left--------->"+(deep_c7left==q))
  console.log("text---------------->"+[JSON.stringify(text.sort())==JSON.stringify(t1.sort())])
  console.log("lumbar_l2right------>"+(lumbar_l2right==u))
  console.log("lumbar_l2left------->"+(lumbar_l2left==y))
  console.log("lumbar_l3right------>"+(lumbar_l3right==v))
  console.log("lumbar_l3left------->"+(lumbar_l3left==z))
  console.log("lumbar_l4right------>"+(lumbar_l4right==w))
  console.log("lumbar_l4left------->"+(lumbar_l4left==aa))
  console.log("lumbar_l5right------>"+(lumbar_l5right==x))
  console.log("lumbar_l5left------->"+(lumbar_l5left==ab))
  console.log("lumbar_heelright---->"+(lumbar_heelright==ac))
  console.log("lumbar_heelleft----->"+(lumbar_heelleft==ae))
  console.log("lumbar_toeright----->"+(lumbar_toeright==ad))
  console.log("lumbar_toeleft------>"+(lumbar_toeleft==af))
  console.log("deep_Patellarright-->"+(deep_Patellarright==ag))
  console.log("deep_Patellarleft--->"+(deep_Patellarleft==aj))
  console.log("deep_Achillesright-->"+(deep_Achillesright==ah))
  console.log("deep_Achillesleft--->"+(deep_Achillesleft==ak))
  console.log("deep_UMNLright------>"+(deep_UMNLright==al))
  console.log("deep_UMNLleft------->"+(deep_UMNLleft==am))
  console.log("present_other------->"+[JSON.stringify(others1.sort())==JSON.stringify(oth1.sort())])
          
                 
}   
}     
