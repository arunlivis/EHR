var Data = require('../EHR_Json/data.json')

var id;
var open_patient=0;

module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[1].username, Data.user1[1].password)

},
'Close the patient':function(browser){
	browser
	  .useCss()
	  .pause(500)
	  .click('a[href="/EHR/Clinicadmin/viewAccountReceivableDetails"]')
	  .waitForElementVisible('#fileType' , 60000)
	  .pause(500)
	  .click('input[onchange="getaccountBills()"][value="1"]')
	  .waitForElementVisible('#fromNoOfDays' , 60000)
	  .useXpath()
	  .waitForElementVisible("//*[@id='accountreceviable']/tbody/tr[1]/td[2]" , 60000)
	  .pause(500)
	  .getText("//*[@id='accountreceviable']/tbody/tr[1]/td[1]" , function(result){
	  	  id=result.value
	  	browser
	  	  .useCss()
	  	  .setValue('input[id="Patient ID"]' , result.value)
	  	  .pause(500)
	  	  .click('a[onclick="closePatientFile('+result.value+',0)"]')
	  })
	  .waitForElementVisible('#closemodal' , 60000)
	  .pause(500)
	  .click('button[onclick="closeFile()"]')
	  .waitForElementNotVisible('#closemodal' , 60000)
	  .pause(500)
	  .click('a[href="/EHR/EHR/j_spring_security_logout"]')
	  .waitForElementVisible('#username_id' , 60000)
	  .pause(500)
},
'Doctor Login':function(browser){
	browser
	   .useCss()
	   .pause(500)
	   .setValue('#username_id' , Data.user1[2].password)
	   .setValue('#password_id' , Data.user1[2].password)
	   .pause(500)
	   .click('button[class="btn btn-primary"][type="submit"]')
	   .waitForElementVisible('a[class="firstLevel"][href="/EHR/Patient-Details/viewCalender?date=1"]' , 60000)
	   .pause(500)
	   .useXpath()
	   .click("//*[@id='mainMenu']/ul/li[2]/a")
	   .pause(300)
	   .useCss()
	   .click('a[href="/EHR/Doctor/view-patient-details-closed"]')
	   .waitForElementVisible('#col0_filter' , 60000)
	   .pause(500)
	   .setValue('#col0_filter' , id)
	   .waitForElementVisible('a[onclick="postNavigateToProfile('+id+',0);"]' , 60000)
	   .pause(500)
	   .useXpath()
	   .verify.containsText("//*[@id='patient']/tbody/tr/td[1]" , id)
	   .pause(500)
	   .useCss()
	   .click('#username_label')
	   .pause(200)
	   .click('a[href="/EHR/EHR/j_spring_security_logout"]')
	   .waitForElementVisible('#username_id' , 60000)
	   .pause(500)
},
'Open patient':function(browser){
	browser
	   .setValue('#username_id' , Data.user1[1].password)
	   .setValue('#password_id' , Data.user1[1].password)
	   .pause(500)
	   .click('button[class="btn btn-primary"][type="submit"]')
	   .waitForElementVisible('a[class="firstLevel"]' , 60000)
	   .pause(500)
	   .click('a[href="/EHR/Clinicadmin/viewAccountReceivableDetails"]')
	   .waitForElementVisible('#fileType' , 60000)
	   .pause(500)
	   .click('input[onchange="getaccountBills()"][value="0"]')
	   .useXpath()
	   .waitForElementVisible("//*[@id='accountreceviable']/tbody/tr/td[2]" , 60000)
	   .pause(500)
	   .useCss()
	   .setValue('input[id="Patient ID"]' , id)
	   .pause(500)
	   .click('a[onclick="closePatientFile('+id+',1)"]')
	   .waitForElementVisible('#closemodal' , 60000)
	   .pause(500)
	   .click('button[onclick="closeFile()"]')
	   .waitForElementNotVisible('#closemodal' , 60000)
	   .pause(500)
	   .click('a[href="/EHR/EHR/j_spring_security_logout"]')
	   .waitForElementVisible('#username_id' , 60000)
	   .pause(500)
},
'check in closed patient':function(browser){
	browser
	   .useCss()
	   .pause(500)
	   .setValue('#username_id' , Data.user1[2].password)
	   .setValue('#password_id' , Data.user1[2].password)
	   .pause(500)
	   .click('button[class="btn btn-primary"][type="submit"]')
	   .waitForElementVisible('a[class="firstLevel"][href="/EHR/Patient-Details/viewCalender?date=1"]' , 60000)
	   .pause(500)
	   .useXpath()
	   .click("//*[@id='mainMenu']/ul/li[2]/a")
	   .pause(300)
	   .useCss()
	   .click('a[href="/EHR/Doctor/view-patient-details-closed"]')
	   .waitForElementVisible('#col0_filter' , 60000)
	   .pause(500)
	   .setValue('#col0_filter' , id)
	   //.waitForElementNotVisible('a[onclick="postNavigateToProfile('+id+',0);"]' , 60000)
	   .pause(500)
	   .verify.elementNotPresent('a[onclick="postNavigateToProfile('+id+',0);"]')
},
'Check in Open Patient':function(browser){
	browser
	   .useXpath()
	   .pause(500)
	   .click("//*[@id='mainMenu']/ul/li[2]/a")
	   .pause(300)
	   .useCss()
	   .click('a[href="/EHR/Doctor/view-patient-details-open"]')
	   .waitForElementVisible('#col0_filter' , 60000)
	   .pause(500)
	   .setValue('#col0_filter' , id)
	   .pause(1000)
	   .mouseButtonDown('left')
	   .waitForElementVisible('a[class="skyblue tooltipsclass"]' , 60000)
	   .useCss()
	   .pause(1000)
	   .elements('css selector', 'table#patient tbody tr', function(result) {
	   	    for(i=1; i<=result.value.length; i++){
	   	    	browser
	   	    	  .useXpath()
	   	    	  .getText("//*[@id='patient']/tbody/tr["+i+"]/td[1]" , function(result){
	   	    	  	  if(result.value==id){
	   	    	  	  	  open_patient=result.value
	   	    	  	  }
	   	    	  })
	   	    }
       })
},
'Result':function(browser){
   browser       
	   .pause(2500)
	   .verify.equal(open_patient , id)
	   browser
	   .pause(500)
	   .end()
}
}