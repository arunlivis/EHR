var Data = require('../EHR_Json/data.json')

var id;
var user_name;

module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[1].username, Data.user1[1].password)

},
'Get User Name':function(browser){
	browser
	 .useCss()
	 .pause(500)
	 .click('a[class="firstLevel"]')
	 .pause(300)
	 .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
	 .waitForElementVisible('a[onclick="getPatientProfile()"]' , 60000)
	 .pause(500)
	 .getText('td[class="sorting_1"]' , function(result){
	 	id=result.value
	 	browser
	 	  .click('a[onclick="postNavigateToProfile('+result.value+',1);"]')
	 })
	 browser
	   .waitForElementVisible('#patient_first_name' , 60000)
	   .pause(500)
	   .getText('#usernameId' , function(result){
	   	   user_name=result.value.substr(11)
	   })
	   .pause(500)
	   .click('a[href="/EHR/EHR/j_spring_security_logout"]')
	   .waitForElementVisible('#username_id' , 60000)
	   .pause(500)
},
'Patient Login':function(browser){
	browser
	  .pause(500)
	  .setValue('#username_id' , user_name)
	  .setValue('#password_id' , user_name)
	  .pause(500)
	  .click('button[class="btn btn-primary"][type="submit"]')
	  .waitForElementVisible('a[class="firstLevel"][href="/EHR/Patient/patient-dashboard"]' , 60000)
	  .pause(500)
	  .isVisible('#myModal' , function(result){
	  	   if(result.value==true){
	  	   	   browser
	  	   	      .setValue('#password' , user_name)
	  	   	      .setValue('#confirmpassword' , user_name)
	  	   	      .pause(500)
	  	   	      .click('button[onclick="return savepassword()"]')
	  	   	      .waitForElementNotVisible('#myModal' , 60000)
	  	   	      .pause(500)
	  	   }
	  })
	  .pause(500)
},
'Request Form':function(browser){
   browser	  
	  .click('a[class="firstLevel"][href="/EHR/Patient/patient-view-medical-history"]')
	  .waitForElementVisible('a[onclick="doRequestAllSelected()"]' , 60000)
	  .pause(500)
	  .click('a[onclick="doRequestAllSelected()"]')
	  .pause(500)
	  .verify.elementPresent('#alertForRequestRecord')
	  .pause(500)
	  .click('button[class="btn btn-danger"][type="button"]')
	  .pause(500)
	  .click('input[name="patientForm"][value="4"]')
	  .pause(500)
	  .click('a[onclick="doRequestAllSelected()"]')
	  .waitForElementVisible('#alertForRequestRecord' , 60000)
	  .pause(500)
	  .verify.containsText('#request_record_success_id' , 'Request successfully sent')
	  .pause(500)
	  .click('button[class="btn btn-danger"][type="button"]')
	  .pause(500)
	  .click('a[onclick="doRequestSinglePatientForm(6)"]')
	  .waitForElementVisible('#alertForRequestRecord' , 60000)
	  .pause(500)
	  .verify.containsText('#request_record_success_id' , 'Request successfully sent')
	  .pause(500)
	  .click('button[class="btn btn-danger"][type="button"]')
	  .pause(500)
	  .click('a[href="/EHR/EHR/j_spring_security_logout"]')
	  .waitForElementVisible('#username_id' , 60000)
	   .pause(500)
},
'Doctor Login':function(browser){
	browser
	  .pause(500)
	  .setValue('#username_id' , Data.user1[2].password)
	  .setValue('#password_id' , Data.user1[2].password)
	  .pause(500)
	  .click('button[class="btn btn-primary"][type="submit"]')
	  .waitForElementVisible('a[class="firstLevel"][href="/EHR/Patient-Details/viewCalender?date=1"]' , 60000)
	  .pause(500)
	  .useXpath()
	  .click("//*[@id='mainMenu']/ul/li[2]/a")
	  .pause(300)
	  .useCss()
	  .click('a[href="/EHR/Doctor/view-patient-records"]')
	  .waitForElementVisible('input[id="Patient ID"]' , 60000)
	  .pause(500)
	  .setValue('input[id="Patient ID"]' , id)
	  .useXpath()
	  .waitForElementVisible("//*[@id='requestRecordsTable']/tbody/tr/td[1]" , 60000)
	  .pause(500)
	  .verify.containsText("//*[@id='requestRecordsTable']/tbody/tr/td[1]" , id)
	  .pause(500)
	  .useCss()
	  .click('a[onclick="postNavigateToProfile('+id+');"]')
	  .waitForElementVisible('a[onclick="doApproveOrRejectAllSelected(1)"]' , 60000)
	  .pause(500)
	  .click('a[onclick="doApproveOrRejectAllSelected(1)"]')
	  .waitForElementVisible('#request_record_success_id' , 60000)
	  .pause(500)
	  .verify.containsText('#request_record_success_id' , 'Select at least one')
	  .pause(500)
	  .useXpath()
	  .click("//*[@id='alertForRequestRecord']/div/div/div[3]/button")
	  .pause(500)
	  .useCss()
	  .click('a[onclick="doApproveOrRejectSinglePatientForm(4,1)"]')
	  .waitForElementVisible('#request_record_success_id' , 60000)
	  .pause(500)
	  .verify.containsText('#request_record_success_id' , 'Successfully done')
	  .pause(500)
	  .useXpath()
	  .click("//*[@id='alertForRequestRecord']/div/div/div[3]/button")
	  .useCss()
	  .waitForElementNotVisible('#request_record_success_id' , 60000)
	  .pause(500)
	  .getLocationInView('a[onclick="doApproveOrRejectSinglePatientForm(6,3)"]')
	  .pause(500)
	  .getLocationInView('a[onclick="doApproveOrRejectAllSelected(1)"]')
	  .pause(500)
	  .click('a[onclick="doApproveOrRejectSinglePatientForm(6,3)"]')
	  .waitForElementVisible('#request_record_success_id' , 60000)
	  .pause(500)
	  .verify.containsText('#request_record_success_id' , 'Successfully done')
	  .pause(500)
	  .useXpath()
	  .click("//*[@id='alertForRequestRecord']/div/div/div[3]/button")
	  .useCss()
	  .waitForElementNotVisible('#request_record_success_id' , 60000)
	  .pause(500)
	  .click('#username_label')
	  .pause(300)
	  .click('a[href="/EHR/EHR/j_spring_security_logout"]')
	  .waitForElementVisible('#username_id' , 60000)
	   .pause(500)
},
'Request Status':function(browser){
	browser
	  .pause(500)
	  .setValue('#username_id' , user_name)
	  .setValue('#password_id' , user_name)
	  .pause(500)
	  .click('button[class="btn btn-primary"][type="submit"]')
	  .waitForElementVisible('a[class="firstLevel"][href="/EHR/Patient/patient-dashboard"]' , 60000)
	  .pause(500)
	  .click('a[href="/EHR/Patient/patient-view-medical-history"]')
	  .waitForElementVisible('a[onclick="doRequestAllSelected()"]' , 60000)
	  .pause(500)
	  .verify.containsText('a[class="btn btn-warning btn-xs tooltipsclass"]' , 'View Form')
	  .useXpath()
	  .verify.containsText("//*[@id='requestRecordsDiv']/div[5]/div[4]/span/span[1]/small" , 'Please contact clinic')
	  .pause(500)
	  .useCss()
	  .click('a[href="/EHR/EHR/j_spring_security_logout"]')
	   .waitForElementVisible('#username_id' , 60000)
	   .pause(500)
},
'Cancel Request':function(browser){
	browser
	  .pause(500)
	  .setValue('#username_id' , Data.user1[2].password)
	  .setValue('#password_id' , Data.user1[2].password)
	  .pause(500)
	  .click('button[class="btn btn-primary"][type="submit"]')
	  .waitForElementVisible('a[class="firstLevel"][href="/EHR/Patient-Details/viewCalender?date=1"]' , 60000)
	  .pause(500)
	  .useXpath()
	  .click("//*[@id='mainMenu']/ul/li[2]/a")
	  .pause(300)
	  .useCss()
	  .click('a[href="/EHR/Doctor/view-patient-records"]')
	  .waitForElementVisible('input[id="Patient ID"]' , 60000)
	  .pause(500)
	  .setValue('input[id="Patient ID"]' , id)
	  .click('a[onclick="doCancelRequestRecordWhole('+id+')"]')
	  .waitForElementVisible('#myModal' , 60000)
	  .pause(500)
	  .useXpath()
	  .click("//*[@id='myModal']/div/div/div[3]/button")
	  .useCss()
	  .waitForElementNotVisible('#myModal' , 60000)
	  .pause(500)
	  .click('#username_label')
	  .pause(300)
	  .click('a[href="/EHR/EHR/j_spring_security_logout"]')
	  .waitForElementVisible('#username_id' , 60000)
	   .pause(500)
},
'Request Status 2':function(browser){
	browser
	  .pause(500)
	  .setValue('#username_id' , user_name)
	  .setValue('#password_id' , user_name)
	  .pause(500)
	  .click('button[class="btn btn-primary"][type="submit"]')
	  .waitForElementVisible('a[class="firstLevel"][href="/EHR/Patient/patient-dashboard"]' , 60000)
	  .pause(500)
	  .click('a[href="/EHR/Patient/patient-view-medical-history"]')
	  .waitForElementVisible('a[onclick="doRequestAllSelected()"]' , 60000)
	  .pause(500)
	  .verify.containsText('a[onclick="doRequestSinglePatientForm(4)"]' , 'Request Record')
	  .verify.containsText('a[onclick="doRequestSinglePatientForm(6)"]' , 'Request Record')
	  .pause(500)
	  .end()

}
}