var Data =  require(process.cwd()+'\\EHR_Json\\data.json');
var fs = require('fs');
var fileName =  process.cwd()+'\\profile check\\procheck.json';
var file = require(fileName);

var id;
var user_name;

var firstname;                   var firstname_1;
var middlename;                  var middlename_1;
var lastname;                    var lastname_1;
var gen;                         var gen_1;
var martial;                     var martial_1;
var ssn;                         var ssn_1;
var email;                       var email_1;
var ph1;                         var ph1_1;
var ph2;                         var ph2_1;
var address;                     var address_1;
var country;                     var country_1;
var city;                        var city_1;
var zip;                         var zip_1;



    a=['Aidan' , 'Aldrich' , 'Barnard' , 'Bradshaw' , 'Burney' , 'Charleston' , 'Charlie' , 'Darton' , 'Deverell' , 'Edson' , 'Farnley' , 'Garrett']   
    b=['Afanas' , 'Agripin', 'Baran' , 'Brencis' , 'Cheslav' , 'Desya' , 'Egor' , 'Dobry' , 'Fedyenka' , 'Feofilakt' , 'Foka' , 'Garald' , 'Gedeon']
    c=['Abejundio' , 'Abhiroop' , 'Advaita' , 'Ajaipal' , 'Bankebihari' , 'Bhagwan' , 'Chetan' , 'Dalmeet' , 'Dharamdev' , 'Ekagrah' , 'Fanibhusan']
    firstname=a[Math.floor(Math.random()*a.length)]
    middlename=b[Math.floor(Math.random()*b.length)]
    lastname=c[Math.floor(Math.random()*c.length)]
    gen=Math.floor((Math.random()*3)+1)
    martial=Math.floor((Math.random()*3)+1)
    ssn=Math.floor((Math.random()*888888889)+111111111)
    var f1=['patient1@gmail.com' , 'patient2@ymail.com' , 'patient3@yahoo.com' , 'patient4@outlook.com']
    email=f1[Math.floor(Math.random()*f1.length)]
    ph1=Math.floor((Math.random()*1000000000)+9000000000)
    ph2=Math.floor((Math.random()*1000000000)+9000000000)
    var f=["Abby Road" , "Wilber" , "smith street" , 'Jones Street']
    address=f[Math.floor(Math.random()*f.length)]
    coun=Math.floor((Math.random()*225)+2)
    var e=["Alabama" , "New Mexico" , "Nebraska"]
    city=e[Math.floor(Math.random()*e.length)]
    zip=Math.floor((Math.random()*88889)+11111)


module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[1].username, Data.user1[1].password)


        file.user[0].firstname = firstname;
        file.user[1].middlename = middlename;
        file.user[2].lastname = lastname;
        file.user[3].gen = gen;
        file.user[4].martial = martial;
        file.user[5].ssn = ssn;
        file.user[6].email = email;
        file.user[7].ph1 = ph1;
        file.user[8].ph2 = ph2;
        file.user[9].address = address;
       // file.user[10].country = country;
        file.user[11].city = city;
        file.user[12].zip = zip;

        fs.writeFile(fileName, JSON.stringify(file), function (err) {
         if (err) return console.log(err);
  
       });

},
'Get User Name':function(browser){
	browser
	 .useCss()
	 .pause(500)
	 .click('a[class="firstLevel"]')
	 .pause(300)
	 .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
	 .waitForElementVisible('a[onclick="getPatientProfile()"]' , 60000)
	 .pause(500)
	 .getText('td[class="sorting_1"]' , function(result){
	 	id=result.value
	 	browser
	 	  .click('a[onclick="postNavigateToProfile('+result.value+',1);"]')
	 })
	 browser
	   .waitForElementVisible('#patient_first_name' , 60000)
	   .pause(500)
	   .getText('#usernameId' , function(result){
	   	   user_name=result.value.substr(11)
	   })
	   .pause(500)
     .clearValue('#patient_first_name')
     .clearValue('#patient_last_name')
     .pause(300)
     .useXpath()
     .click("//*[@id='country']/option[1]")
     .useCss()
     .pause(500)
     .getLocationInView('button[class="btn btn-primary"][type="submit"]')
     .pause(500)
     .getLocationInView('#state')
     .pause(500)
     .click('button[class="btn btn-primary"][type="submit"]')
     .pause(500)
     .verify.visible('#patient_first_name_error')
     .verify.visible('#patient_last_name_error')
     .verify.visible('#date_of_birth_error')
     .verify.visible('#contact_no_error')
     .verify.visible('#address_error')
     .verify.visible('#country_error')
     .verify.visible('#state_error')
     .verify.visible('#city_error')
     .verify.visible('#zipcode_error')
     .verify.visible('#patientprofilewholeForm_error')
     .pause(500)
     .click('a[href="/EHR/EHR/j_spring_security_logout"]')
     .waitForElementVisible('#username_id' , 60000)
     .pause(500)
},
'patient login':function(browser){
	browser
	   .useCss()
	   .pause(500)
	   .setValue('#username_id' , user_name)
	   .setValue('#password_id' , user_name)
	   .pause(300)
	   .click('button[class="btn btn-primary"][type="submit"]')
	   .waitForElementVisible('a[class="firstLevel"][href="/EHR/Patient/patient-dashboard"]' , 60000)
	   .pause(500)
	   .isVisible('#myModal' , function(result){
	  	   if(result.value==true){
	  	   	   browser
	  	   	      .setValue('#password' , user_name)
	  	   	      .setValue('#confirmpassword' , user_name)
	  	   	      .pause(500)
	  	   	      .click('button[onclick="return savepassword()"]')
	  	   	      .waitForElementNotVisible('#myModal' , 60000)
	  	   	      .pause(500)
	  	   }
	   })
},
'Profile':function(browser){
	browser
	  .useCss()
	  .pause(800)
	  .click('a[href="/EHR/Patient-Details/profile"]')
	  .waitForElementVisible('#patient_first_name' , 60000)
	  .pause(800)
     .clearValue('#patient_first_name')
     .clearValue('#patient_last_name')
     .pause(800)
     .useXpath()
     .click("//*[@id='country']/option[1]")
     .useCss()
     .pause(800)
     .getLocationInView('button[class="btn btn-primary"][type="submit"]')
     .pause(800)
     .getLocationInView('#state')
     .pause(800)
     .click('button[class="btn btn-primary"][type="button"]')
     .pause(800)
     .verify.visible('#patient_first_name_error')
     .verify.visible('#patient_last_name_error')
     .verify.visible('#date_of_birth_error')
     .verify.visible('#contact_no_error')
     .verify.visible('#address_error')
     .verify.visible('#country_error')
     .verify.visible('#state_error')
     .verify.visible('#city_error')
     .verify.visible('#zipcode_error')
     .verify.visible('#patientprofilewholeForm_error')
     .pause(500)
  // a=['Aidan' , 'Aldrich' , 'Barnard' , 'Bradshaw' , 'Burney' , 'Charleston' , 'Charlie' , 'Darton' , 'Deverell' , 'Edson' , 'Farnley' , 'Garrett']   
  // b=['Afanas' , 'Agripin', 'Baran' , 'Brencis' , 'Cheslav' , 'Desya' , 'Egor' , 'Dobry' , 'Fedyenka' , 'Feofilakt' , 'Foka' , 'Garald' , 'Gedeon']
  // c=['Abejundio' , 'Abhiroop' , 'Advaita' , 'Ajaipal' , 'Bankebihari' , 'Bhagwan' , 'Chetan' , 'Dalmeet' , 'Dharamdev' , 'Ekagrah' , 'Fanibhusan']
  //   firstname=a[Math.floor(Math.random()*a.length)]
  //   middlename=b[Math.floor(Math.random()*b.length)]
  //   lastname=c[Math.floor(Math.random()*c.length)]
  //   gen=Math.floor((Math.random()*3)+1)
  //   martial=Math.floor((Math.random()*3)+1)
  //   ssn=Math.floor((Math.random()*888888889)+111111111)
  //   var f1=['patient1@gmail.com' , 'patient2@ymail.com' , 'patient3@yahoo.com' , 'patient4@outlook.com']
  //   email=f1[Math.floor(Math.random()*f1.length)]
  //   ph1=Math.floor((Math.random()*1000000000)+9000000000)
  //   ph2=Math.floor((Math.random()*1000000000)+9000000000)
  //   var f=["Abby Road" , "Wilber" , "smith street" , 'Jones Street']
  //   address=f[Math.floor(Math.random()*f.length)]
  //   coun=Math.floor((Math.random()*225)+2)
  //   var e=["Alabama" , "New Mexico" , "Nebraska"]
  //   city=e[Math.floor(Math.random()*e.length)]
  //   zip=Math.floor((Math.random()*88889)+11111)

    browser
      .clearValue('#patient_first_name')
      .setValue('#patient_first_name' , firstname)
      .clearValue('#patient_middle_name')
      .setValue('#patient_middle_name' , middlename)
      .clearValue('#patient_last_name')
      .setValue('#patient_last_name' , lastname)
      .clearValue('#ssn_number')
      .setValue('#ssn_number' , ssn)
      .pause(500)
      .click('span[class="glyphicon glyphicon-calendar fa fa-calendar"]')
      .pause(500)
      .click('span[class="glyphicon glyphicon-calendar fa fa-calendar"]')
      .pause(500)
      .useXpath()
      .click("//*[@id='genders']/option["+gen+"]")
      .pause(300)
      .click("//*[@id='marital_status']/option["+martial+"]")
      .pause(300)
      .useCss()
      .clearValue('#email')
      .setValue('#email' , email)
      .clearValue('#contact_no')
      .setValue('#contact_no' , ph1)
      .clearValue('#homePhone')
      .setValue('#homePhone' , ph2)
      .clearValue('#address')
      .setValue('#address' , address)
      .pause(500)
      .getLocationInView('button[class="btn btn-primary"][type="submit"]')
      .pause(500)
      .getLocationInView('#ssn_number')
      .pause(500)
      .useXpath()
      .click("//*[@id='country']/option["+coun+"]")
      .useCss()
      .pause(500)
      .getLocationInView('button[class="btn btn-primary"][type="submit"]')
      .pause(500)
      .getLocationInView('#ssn_number')
      .pause(500)
      .useXpath()
      .click("//*[@id='state']/option[2]")
      .pause(500)
      .useCss()
      .clearValue('#city')
      .setValue('#city' , city)
      .clearValue('#zipcode')
      .setValue('#zipcode' , zip)
      .pause(500)
      .getValue('#country' , function(result){
      	  country=result.value
          file.user[10].country = country;
fs.writeFile(fileName, JSON.stringify(file), function (err) {
         if (err) return console.log(err);
  
       });
      })
      browser
      .click('button[class="btn btn-primary"][type="button"]')
      

      .waitForElementVisible('#patientAlertProfile' , 60000)
      .pause(500)
      .click('button[onclick="return submitProfile();"]')
      .waitForElementNotVisible('#patientAlertProfile' , 60000)
      .pause(500)
      .verify.visible('span[class="btn-danger btn-sm"]')
      .pause(500)
      .click('a[href="/EHR/EHR/j_spring_security_logout"]')
      .waitForElementVisible('#username_id' , 60000)
      .pause(500)
},
'Admin Login':function(browser){
	browser
	   .setValue('#username_id' , Data.user1[1].username)
	   .setValue('#password_id' , Data.user1[1].password)
	   .pause(500)
	   .click('button[class="btn btn-primary"][type="submit"]')
	   .waitForElementVisible('a[class=""]' , 60000)
	   .pause(500)
	   .click('a[class="firstLevel"]')
	   .pause(300)
	   .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
	   .waitForElementVisible('a[onclick="getPatientProfile()"]' , 60000)
	   .pause(500)
	   .click('a[onclick="postNavigateToProfile('+id+',1);"]')
	   .waitForElementVisible('#patient_first_name' , 60000)
	   .pause(500)
	   .verify.elementPresent('a[class="btn btn-danger btn-sm tooltipsclass"][onclick="confirmLockUnlockPatientProfile(1)"]')
},
'Check':function(browser){
	browser
	   .getValue('#patient_first_name' , function(result){
	   	     firstname_1=result.value
	   	 })
	   .getValue('#patient_middle_name' , function(result){
	   	     middlename_1=result.value
	   	 })
	   .getValue('#patient_last_name' , function(result){
	   	     lastname_1=result.value
	   	 })
	   .getValue('#genders' , function(result){
	   	     gen_1=result.value
	   	 })
	   .getValue('#marital_status' , function(result){
	   	     martial_1=result.value
	   	 })
	   .getValue('#email' , function(result){
	   	     email_1=result.value
	   	 })
	   .getValue('#contact_no' , function(result){
	   	     xyz=result.value
	   	          ph1_1=xyz[1]+xyz[2]+xyz[3]+xyz[6]+xyz[7]+xyz[8]+xyz[10]+xyz[11]+xyz[12]+xyz[13]
	   	 })
	   .getValue('#homePhone' , function(result){
	   	     xxx=result.value
	   	          ph2_1=xxx[1]+xxx[2]+xxx[3]+xxx[6]+xxx[7]+xxx[8]+xxx[10]+xxx[11]+xxx[12]+xxx[13]
	   	 })
	   .getText('#address' , function(result){
	   	     address_1=result.value
	   	 })
	   .getValue('#country' , function(result){
	   	     country_1=result.value
	   	 })
	   .getValue('#city' , function(result){
	   	     city_1=result.value
	   	 })
	   .getValue('#zipcode' , function(result){
	   	     zip_1=result.value
	   	 })
browser
     .verify.valueContains('#patient_first_name' , firstname)
     .verify.valueContains('#patient_middle_name' , middlename)
     .verify.valueContains('#patient_last_name' , lastname)
     .verify.valueContains('#genders' , gen)
     .verify.valueContains('#marital_status' , martial)
     .verify.valueContains('#email' , email)
     .verify.valueContains('#contact_no' , '('+ph1.toString().substring(0, 3)+') '+ph1.toString().substring(3, 6)+'-'+ph1.toString().substring(6, 10))
     .verify.valueContains('#homePhone' , '('+ph2.toString().substring(0, 3)+') '+ph2.toString().substring(3, 6)+'-'+ph2.toString().substring(6, 10))
     .verify.containsText('#address' , address)
     .verify.valueContains('#country' , country)
     .verify.valueContains('#city' , city)
     .verify.valueContains('#zipcode' , zip)
     .pause(500)
     .end()


},
'Result':''+function(browser){
	browser
         console.log("firstname---->"+[firstname==firstname_1])
         console.log("middlename--->"+[middlename==middlename_1])
         console.log("lastname----->"+[lastname==lastname_1])
         console.log("gender------->"+[gen==gen_1])
         console.log("martial------>"+[martial==martial_1])
         console.log("email-------->"+[email==email_1])
         console.log("phone-1------>"+[ph1==ph1_1])
         console.log("phone-2------>"+[ph2==ph2_1])
         console.log("address------>"+[address==address_1])
         console.log("country------>"+[country==country_1])
         console.log("city--------->"+[city==city_1])
         console.log("zip---------->"+[zip==zip_1])
}
}