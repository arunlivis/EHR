var Data = require('../EHR_Json/data.json')

var id;
var user_name;

module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[1].username, Data.user1[1].password)

},
'Get User Name':function(browser){
	browser
	 .useCss()
	 .pause(500)
	 .click('a[class="firstLevel"]')
	 .pause(300)
	 .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
	 .waitForElementVisible('a[onclick="getPatientProfile()"]' , 60000)
	 .pause(500)
	 .getText('td[class="sorting_1"]' , function(result){
	 	id=result.value
	 	browser
	 	  .click('a[onclick="postNavigateToProfile('+result.value+',1);"]')
	 })
	 browser
	   .waitForElementVisible('#patient_first_name' , 60000)
	   .pause(500)
	   .getText('#usernameId' , function(result){
	   	   user_name=result.value.substr(11)
	   })
	   .pause(500)
	   .click('a[onclick="getDefaultFormList();"]')
	   .waitForElementVisible('button[onclick="lockConfirmation()"]' , 60000)
	   .pause(500)
	   .useXpath()
	   .click("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']")
	       .useCss()
    .waitForElementVisible('#cpiDate' , 60000)
    .pause(500)
    .getLocationInView('#acceptstatement_id')
    .pause(1500)
    .getLocationInView('#symptom_description10')
    .pause(1000)
    .getAttribute('#areSymptomsDueToAccident_id' , 'checked' , function(result){
    	if(result.value!="true"){
    		browser
    		.useCss()
    		.click('input[name="areSymptomsDueToAccident"][value="1"]')
    		.pause(300)
    		.click('input[name="typeOfAccidentAuto"][value="1"]')
    		.pause(300)
    		.click('input[name="haveRetainedAttorney"][value="0"]')
    		.pause(500)

    	}
    	if(result.value=="true"){
    		      browser
    		      .getAttribute('#auto' , 'checked' , function(result){
    		      	     if(result.value!="true"){
    		      	     	browser
    		      	     	.useCss()
    		      	     	.pause(500)
    		      	     	.getLocationInView('#medicalHistory_17')
    		      	     	.pause(500)
    		      	     	.getLocationInView('#symptom_description10')
    		      	     	.pause(500)
    		      	     	.click('[name="typeOfAccidentAuto"][value="1"]')
    		                .pause(300)
    		      	     }
    		      })
    	}
    	browser
    	.useCss()
      .pause(1000)
      .getLocationInView('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
      .pause(1000)
      .getLocationInView('#acceptstatement_id')
      .pause(1000)
    	.click('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
    })
    browser
    .useXpath()
    .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000)
    .pause(500)
    .verify.elementPresent("//*[@id='formsContent']/div/div/a[text()='Auto Accident Questionnaire']")
    .verify.elementPresent("//*[@id='formsContent']/div/div/a[text()='Screening Disclosure']")
    .pause(500)
    .useCss()
    .click('a[href="/EHR/EHR/j_spring_security_logout"]')
     .waitForElementVisible('#username_id' , 60000)
     .pause(500)
},
'patient login':function(browser){
	browser
	   .useCss()
	   .pause(500)
	   .setValue('#username_id' , user_name)
	   .setValue('#password_id' , user_name)
	   .pause(300)
	   .click('button[class="btn btn-primary"][type="submit"]')
	   .waitForElementVisible('a[class="firstLevel"][href="/EHR/Patient/patient-dashboard"]' , 60000)
	   .pause(500)
	       .isVisible('#myModal' , function(result){
	  	      if(result.value==true){
	  	   	     browser
	  	   	      .setValue('#password' , user_name)
	  	   	      .setValue('#confirmpassword' , user_name)
	  	   	      .pause(500)
	  	   	      .click('button[onclick="return savepassword()"]')
	  	   	      .waitForElementNotVisible('#myModal' , 60000)
	  	   	      .pause(500)
	  	      }
	       })

},
'Profile':function(browser){
	browser
	  .useCss()
	  .pause(500)
	  .waitForElementVisible('a[href="/EHR/Patient-Details/profile"]' , 60000)
	  .click('a[href="/EHR/Patient-Details/profile"]')
	  .waitForElementVisible('#patient_first_name' , 60000)
	  .pause(500)
},
'Screening Disclosure':function(browser){
    browser
	   .click('a[onclick="getDefaultFormList();"]')
	   .useXpath()
	   .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Screening Disclosure']" , 60000)
	   .pause(500)
	   .useCss()
	        .getText('button[class="btn btn-primary btn-xs tooltipsclass"]' , function(result){
	   	             browser
                         .useXpath()
                          .pause(500)
                          .click("//*[@id='formsContent']/div/div/a[text()='Screening Disclosure']")
                          .useCss()
                          .waitForElementVisible('button[onclick="getDefaultFormList()"]' , 60000)
                          .pause(500)
                                      if(result.value=="Finish Form"){
                                          browser
                                             .useCss()
                                             .pause(500)
                                             .getLocationInView('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
                                             .pause(500)
                                             .getLocationInView('#sd_patient_name_id')
                                             .pause(500)
                                             .click('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
                                             .pause(200)
                                             .verify.visible('#acceptstatement_id_error')
                                      }
            })
            browser
               .pause(500)
               .getLocationInView('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
               .pause(500)
               .getLocationInView('#sd_patient_name_id')
               .pause(500)
               .click('#acceptstatement_id')
               .pause(500)
               .click('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
               .waitForElementVisible('a[onclick="getDefaultFormList();"]' , 60000)
               .pause(500)
               .useXpath()
               .pause(500)
               .verify.elementNotPresent("//*[@id='formsContent']/div/div/a[text()='Screening Disclosure']")
               .pause(500)
               .useCss()
               .click('a[href="/EHR/EHR/j_spring_security_logout"]')
               .waitForElementVisible('#username_id' , 60000)
               .pause(500)
},
'Admin login':function(browser){
    browser
       .useCss()
       .pause(500)
       .setValue('#username_id' , Data.user1[1].username)
       .setValue('#password_id' , Data.user1[1].password)
       .pause(300)
       .click('button[class="btn btn-primary"][type="submit"]')
       .waitForElementVisible('a[class=""]' , 60000)
       .pause(500)
       .click('a[class="firstLevel"]')
       .pause(300)
       .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
       .waitForElementVisible('a[onclick="getPatientProfile()"]' , 60000)
       .pause(500)
       .click('a[onclick="postNavigateToProfile('+id+',1);"]')
       .waitForElementVisible('#patient_first_name' , 60000)
       .pause(500)
       .click('a[onclick="getDefaultFormList();"]')
       .useXpath()
       .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000)
       .pause(500)
},
'Check':function(browser){
    browser
        .useXpath()
        .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000)
        .pause(1000)
        .getLocationInView("//*[@id='formsContent']/div/div/a[text()='Screening Disclosure']")
        .pause(2500)
        .getLocationInView("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']")
        .pause(1000)
        .click("//*[@id='formsContent']/div/div/a[text()='Screening Disclosure']")
        .useCss()
        .waitForElementVisible('#btnExportPatientForm' , 60000)
        .pause(500)
        .verify.visible('input[id="acceptstatement_id"][checked="checked"]')
        .pause(500)
        .end()

}
}                                      