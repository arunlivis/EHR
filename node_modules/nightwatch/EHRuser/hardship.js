var Data = require('../EHR_Json/data.json')

var id;
var user_name;

module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[1].username, Data.user1[1].password)

},
'Get User Name':function(browser){
  browser
   .useCss()
   .pause(500)
   .click('a[class="firstLevel"]')
   .pause(300)
   .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
   .waitForElementVisible('a[onclick="getPatientProfile()"]' , 60000)
   .pause(500)
   .getText('td[class="sorting_1"]' , function(result){
    id=result.value
    browser
      .click('a[onclick="postNavigateToProfile('+result.value+',1);"]')
   })
   browser
     .waitForElementVisible('#patient_first_name' , 60000)
     .pause(500)
     .getText('#usernameId' , function(result){
         user_name=result.value.substr(11)
     })
     .pause(500)
     .useCss()
        .pause(500)
          .click('a[href="/EHR/EHR/j_spring_security_logout"]')
          .waitForElementVisible('#username_id' , 60000)
          .pause(500)
     
},
'patient login':function(browser){
  browser
     .useCss()
     .pause(500)
     .setValue('#username_id' , user_name)
     .setValue('#password_id' , user_name)
     .pause(300)
     .click('button[class="btn btn-primary"][type="submit"]')
     .waitForElementVisible('a[class="firstLevel"][href="/EHR/Patient/patient-dashboard"]' , 60000)
     .pause(500)
         .isVisible('#myModal' , function(result){
            if(result.value==true){
               browser
                .setValue('#password' , user_name)
                .setValue('#confirmpassword' , user_name)
                .pause(500)
                .click('button[onclick="return savepassword()"]')
                .waitForElementNotVisible('#myModal' , 60000)
                .pause(500)
            }
         })

},
'Profile':function(browser){
  browser
    .useCss()
    .pause(500)
    .waitForElementVisible('a[href="/EHR/Patient-Details/profile"]' , 60000)
    .click('a[href="/EHR/Patient-Details/profile"]')
    .waitForElementVisible('#patient_first_name' , 60000)
    .pause(500)
},
'Hardship Agreement':function(browser){
    browser
     .click('a[onclick="getAdminDefaultFormList();"]')
     .useXpath()
     .waitForElementVisible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Hardship Agreement']" , 60000)
     .pause(500)
     .click("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Hardship Agreement']")
     .useCss()
     .waitForElementVisible('button[onclick="getAdminDefaultFormList()"]' , 60000)
     .pause(500)
     .useCss()
     .pause(500)
     .getLocationInView('#acceptstatement_id')
     .pause(500)
     .click('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
     .pause(500)
     .verify.visible('#acceptstatement_id_error')
     .pause(1000)
     .getLocationInView('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
     .pause(1000)
     //.useXpath()
     .getLocationInView('input[name="date"]')
     .pause(1000)
     .useCss()
     .click('#acceptstatement_id')
     .pause(1000)
     .click('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
      .useXpath()
        .waitForElementNotPresent("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Hardship Agreement']" , 60000)
        .pause(500)
        
        .verify.elementNotPresent("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Hardship Agreement']")
        .pause(500)
        .useCss()
         .click('a[href="/EHR/EHR/j_spring_security_logout"]')
         .waitForElementVisible('#username_id' , 60000)
         .pause(500)
},
'Admin login':function(browser){
  browser
     .useCss()
     .pause(500)
     .setValue('#username_id' , Data.user1[1].username)
     .setValue('#password_id' , Data.user1[1].password)
     .pause(300)
     .click('button[class="btn btn-primary"][type="submit"]')
     .waitForElementVisible('a[class=""]' , 60000)
     .pause(500)
     .click('a[class="firstLevel"]')
     .pause(300)
     .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
     .waitForElementVisible('a[onclick="getPatientProfile()"]' , 60000)
     .pause(500)
     .click('a[onclick="postNavigateToProfile('+id+',1);"]')
     .waitForElementVisible('#patient_first_name' , 60000)
     .pause(500)
     .click('a[onclick="getAdminDefaultFormList();"]')
     .waitForElementVisible('button[onclick="getFormsList()"]' , 60000)
     .pause(500)

},
'Check':function(browser){
  browser
     .useXpath()
     .waitForElementVisible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Health Insurance Verification']" , 60000)
     .pause(500)
     .pause(1000)
             .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Hardship Agreement']")
             .pause(1000)
             .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='X-RAY Release']")
             .pause(1000)

             .click("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Hardship Agreement']")
             .useCss()
               .waitForElementVisible('#btnExportPatientForm' , 60000)
               .pause(500)
             .verify.visible('input[id="acceptstatement_id"][checked="checked"]')
             .pause(500)
             .end()
}
}             