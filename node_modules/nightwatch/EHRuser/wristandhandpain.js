var Data = require('../EHR_Json/data.json')

var symp=[];
var painIntensity;             var painIntensity_1=[];
var work;                      var work_1=[];
var numbnessTingling;          var numbnessTingling_1=[];
var driving;                   var driving_1=[];
var personalCare;              var personalCare_1=[];
var sleeping;                  var sleeping_1=[];
var strength;                  var strength_1=[];
var houseYardWork;             var houseYardWork_1=[];
var writingTypingTolerance;    var writingTypingTolerance_1=[];
var recreationSports;          var recreationSports_1=[];

var id;
var user_name;

module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[1].username, Data.user1[1].password)

},
'Get User Name':function(browser){
	browser
	 .useCss()
	 .pause(500)
	 .click('a[class="firstLevel"]')
	 .pause(300)
	 .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
	 .waitForElementVisible('a[onclick="getPatientProfile()"]' , 60000)
	 .pause(500)
	 .getText('td[class="sorting_1"]' , function(result){
	 	id=result.value
	 	browser
	 	  .click('a[onclick="postNavigateToProfile('+result.value+',1);"]')
	 })
	 browser
	   .waitForElementVisible('#patient_first_name' , 60000)
	   .pause(500)
	   .getText('#usernameId' , function(result){
	   	   user_name=result.value.substr(11)
	   })
	   .pause(500)
       .click('a[onclick="getDefaultFormList();"]')
	   .waitForElementVisible('button[onclick="lockConfirmation()"]' , 60000)
	   .pause(500)
	   .useXpath()
	   .click("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']")
	       .useCss()
       .waitForElementVisible('#cpiDate' , 60000)
       .pause(500)
       for(i=1; i<=12; i++){
         browser
           .getValue('#symptom_description'+i+'' , function(result){
                 symp.push(result.value)
           })
       }
},
'check': function(browser){
  browser
    if([(symp.map(Number)).indexOf(6) > -1]=="false" ){
      browser
        .useCss()
        .pause(500)
        .getLocationInView('#symptom_description5')
        .pause(500)
        .getLocationInView('#friendnumber')
        .pause(500)
        .useXpath()
        .click("//*[@id='symptom_description1']/option[7]")
        .useCss()
        .waitForElementVisible('#symptomName' , 60000)
        .pause(500)
        .click('#R'+Math.floor((Math.random()*6)+1)+'')
        .moveToElement('#symptomPlaceHolder' , 103 , 90)
        .mouseButtonClick("Left")
        .pause(300)
        .click('button[class="btn btn-primary"][onclick="getAllIdWithinDiv()"][type="button"]')
        .pause(500)
        .getLocationInView('button[value="Save Changes"]')
        .pause(500)
        .getLocationInView('#acceptstatement_id')
        .pause(500)
        .click('button[value="Save Changes"]')
        .useXpath()
        .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000)
        .pause(500)
     }
     browser
     	  .useCss()
     	  .pause(500)
          .click('a[href="/EHR/EHR/j_spring_security_logout"]')
          .waitForElementVisible('#username_id' , 60000)
          .pause(500)
},
'patient login':function(browser){
	browser
	   .useCss()
	   .pause(500)
	   .setValue('#username_id' , user_name)
	   .setValue('#password_id' , user_name)
	   .pause(300)
	   .click('button[class="btn btn-primary"][type="submit"]')
	   .waitForElementVisible('a[class="firstLevel"][href="/EHR/Patient/patient-dashboard"]' , 60000)
	   .pause(500)
	       .isVisible('#myModal' , function(result){
	  	      if(result.value==true){
	  	   	     browser
	  	   	      .setValue('#password' , user_name)
	  	   	      .setValue('#confirmpassword' , user_name)
	  	   	      .pause(500)
	  	   	      .click('button[onclick="return savepassword()"]')
	  	   	      .waitForElementNotVisible('#myModal' , 60000)
	  	   	      .pause(500)
	  	      }
	       })

},
'Profile':function(browser){
	browser
	  .useCss()
	  .pause(500)
	  .waitForElementVisible('a[href="/EHR/Patient-Details/profile"]' , 60000)
	  .click('a[href="/EHR/Patient-Details/profile"]')
	  .waitForElementVisible('#patient_first_name' , 60000)
	  .pause(500)
},
'Wrist/Hand Disability Questionnaire':function(browser){
    browser
	   .click('a[onclick="getDefaultFormList();"]')
	   .useXpath()
	   .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Wrist/Hand Disability Questionnaire']" , 60000)
	   .pause(500)
	   .click("//*[@id='formsContent']/div/div/a[text()='Wrist/Hand Disability Questionnaire']")
	   .useCss()
	   .waitForElementVisible('button[onclick="getDefaultFormList()"]' , 60000)
	   .pause(500)
},          
'Fill Form':function(browser){	   
	painIntensity=Math.floor((Math.random()*6)+0)
	work=Math.floor((Math.random()*6)+0)
	numbnessTingling=Math.floor((Math.random()*6)+0)
	driving=Math.floor((Math.random()*6)+0)
	personalCare=Math.floor((Math.random()*6)+0)
	sleeping=Math.floor((Math.random()*6)+0)
	strength=Math.floor((Math.random()*6)+0)
	houseYardWork=Math.floor((Math.random()*6)+0)
	writingTypingTolerance=Math.floor((Math.random()*6)+0)
	recreationSports=Math.floor((Math.random()*6)+0)

	browser
     .pause(500)
     .useCss()
     .getLocationInView('input[name="numbnessTingling"][value="5"]')
     .pause(500)
     .getLocationInView('#patientNameid')
     .pause(500)
     .click('input[name="painIntensity"][value="'+painIntensity+'"]')
     .click('input[name="work"][value="'+work+'"]')
     .click('input[name="numbnessTingling"][value="'+numbnessTingling+'"]')
     .click('input[name="driving"][value="'+driving+'"]')
     .pause(500)
     .getLocationInView('input[name="sleeping"][value="5"]')
     .pause(500)
     .getLocationInView('input[name="driving"][value="5"]')
     .pause(500)
     .click('input[name="personalCare"][value="'+personalCare+'"]')
     .click('input[name="sleeping"][value="'+sleeping+'"]')
     .click('input[name="strength"][value="'+strength+'"]')
     .click('input[name="houseYardWork"][value="'+houseYardWork+'"]')
     .pause(500)
     .getLocationInView('#questionScoreid')
     .pause(500)
     .getLocationInView('input[name="strength"][value="4"]')
     .pause(500)
     .click('input[name="writingTypingTolerance"][value="'+writingTypingTolerance+'"]')
     .click('input[name="recreationSports"][value="'+recreationSports+'"]')
     .click('#acceptstatement_id')
     .pause(300)
     .click('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
     .waitForElementVisible('a[onclick="getDefaultFormList();"]' , 60000)
	     .pause(500)
	     .useXpath()
         .pause(500)
         .verify.elementNotPresent("//*[@id='formsContent']/div/div/a[text()='Wrist/Hand Disability Questionnaire']")
         .pause(500)
         .useCss()
         .click('a[href="/EHR/EHR/j_spring_security_logout"]')
         .waitForElementVisible('#username_id' , 60000)
         .pause(500)
},
'Admin login':function(browser){
	browser
	   .useCss()
	   .pause(500)
	   .setValue('#username_id' , Data.user1[1].username)
	   .setValue('#password_id' , Data.user1[1].password)
	   .pause(300)
	   .click('button[class="btn btn-primary"][type="submit"]')
	   .waitForElementVisible('a[class=""]' , 60000)
	   .pause(500)
	   .click('a[class="firstLevel"]')
	   .pause(300)
	   .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
	   .waitForElementVisible('a[onclick="getPatientProfile()"]' , 60000)
	   .pause(500)
	   .click('a[onclick="postNavigateToProfile('+id+',1);"]')
	   .waitForElementVisible('#patient_first_name' , 60000)
	   .pause(500)
	   .click('a[onclick="getDefaultFormList();"]')
},
'Check 2':function(browser){
   browser	   
	   .useXpath()
	   .waitForElementVisible("//*[@id='formsContent']/div/div/a[text()='Confidential Patient Information']" , 60000)     
	   .pause(1000)
       .getLocationInView("//*[@id='formsContent']/div/div/a[text()='Wrist/Hand Disability Questionnaire']")    
       .pause(2500)
       .getLocationInView("//*[@id='formsContent']/div/div/a[text()='Health Insurance Information']")    
       .pause(1000)  
       .click("//*[@id='formsContent']/div/div/a[text()='Wrist/Hand Disability Questionnaire']")  
       .useCss()
       .waitForElementVisible('#btnExportPatientForm' , 60000)
       .pause(500)
       .getLocationInView('input[name="numbnessTingling"][value="5"]')
       .pause(500)
       .getLocationInView('#patientNameid')
       .pause(500)
       .wristandhandpain(painIntensity_1, work_1, numbnessTingling_1, driving_1, personalCare_1, sleeping_1, strength_1, houseYardWork_1, writingTypingTolerance_1,
                      recreationSports_1,painIntensity,work,numbnessTingling,driving,personalCare,sleeping,strength,houseYardWork,writingTypingTolerance,
                        recreationSports)
     .pause(500)
     .end()
},
'Result':''+ function(browser){
	browser
        console.log("painIntensity------------>"+[painIntensity==painIntensity_1])
        console.log("work--------------------->"+[work==work_1])
        console.log("numbnessTingling--------->"+[numbnessTingling==numbnessTingling_1])
        console.log("driving------------------>"+[driving==driving_1])
        console.log("personalCare------------->"+[personalCare==personalCare_1])
        console.log("sleeping----------------->"+[sleeping==sleeping_1])
        console.log("strength----------------->"+[strength==strength_1])
        console.log("houseYardWork------------>"+[houseYardWork==houseYardWork_1])
        console.log("writingTypingTolerance--->"+[writingTypingTolerance==writingTypingTolerance_1])
        console.log("recreationSports--------->"+[recreationSports==recreationSports_1])
}
}    