var Data = require('../EHR_Json/data.json')

var excused_from;                   var excused_from_1=[];
var confined_to;                    var confined_to_1=[];
var Maximum_lifting;                var Maximum_lifting_1=[];
var force_pushing;                  var force_pushing_1=[];
var long_distances;                 var long_distances_1=[];
var Sitting_excessive;              var Sitting_excessive_1=[];
var Standing_excessive;             var Standing_excessive_1=[];
var noRepetitiveBending;            var noRepetitiveBending_1=[];
var useCautionWhileEntering;        var useCautionWhileEntering_1=[];
var lightRecreation;                var lightRecreation_1=[];             
var returnto;                       var returnto_1=[];


var id;
var user_name;

module.exports={
    login : function (browser) {
        browser 
        .login(Data.user1[1].username, Data.user1[1].password)

},
'Get User Name':function(browser){
  browser
   .useCss()
   .pause(500)
   .click('a[class="firstLevel"]')
   .pause(300)
   .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
   .waitForElementVisible('a[onclick="getPatientProfile()"]' , 60000)
   .pause(500)
   .getText('td[class="sorting_1"]' , function(result){
    id=result.value
    browser
      .click('a[onclick="postNavigateToProfile('+result.value+',1);"]')
   })
   browser
     .waitForElementVisible('#patient_first_name' , 60000)
     .pause(500)
     .getText('#usernameId' , function(result){
         user_name=result.value.substr(11)
     })
     .pause(500)
     .useCss()
        .pause(500)
          .click('a[href="/EHR/EHR/j_spring_security_logout"]')
          .waitForElementVisible('#username_id' , 60000)
          .pause(500)
     
},
'patient login':function(browser){
  browser
     .useCss()
     .pause(500)
     .setValue('#username_id' , user_name)
     .setValue('#password_id' , user_name)
     .pause(300)
     .click('button[class="btn btn-primary"][type="submit"]')
     .waitForElementVisible('a[class="firstLevel"][href="/EHR/Patient/patient-dashboard"]' , 60000)
     .pause(500)
         .isVisible('#myModal' , function(result){
            if(result.value==true){
               browser
                .setValue('#password' , user_name)
                .setValue('#confirmpassword' , user_name)
                .pause(500)
                .click('button[onclick="return savepassword()"]')
                .waitForElementNotVisible('#myModal' , 60000)
                .pause(500)
            }
         })

},
'Profile':function(browser){
  browser
    .useCss()
    .pause(500)
    .waitForElementVisible('a[href="/EHR/Patient-Details/profile"]' , 60000)
    .click('a[href="/EHR/Patient-Details/profile"]')
    .waitForElementVisible('#patient_first_name' , 60000)
    .pause(500)
},
'Work School Excused Slip':function(browser){
    browser
     .click('a[onclick="getAdminDefaultFormList();"]')
     .useXpath()
     .waitForElementVisible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Work School Excused Slip']" , 60000)
     .pause(500)
     .click("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Work School Excused Slip']")
     .useCss()
     .waitForElementVisible('button[onclick="getAdminDefaultFormList()"]' , 60000)
     .pause(500)
     .useCss()
                .pause(500)
                .getLocationInView('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
                .pause(500)
                .getLocationInView('#acceptstatement_id')
                .pause(500)
                .click('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
                .pause(300)
                .verify.visible('#beExcusedRadio_option1_error')
                .verify.visible('#beConfinedRadio_option1_error')
                .verify.visible('#maximumLiftingCapabilitRadio_option1_error')
                .verify.visible('#lowForcePushingRadio_option1_error')
                .verify.visible('#unableToDrivelongDistancesid_error')
                .verify.visible('#sittingExcessivePeriodsRadio_option1_error')
                .verify.visible('#standingExcessivePeriodsRadio_option1_error')
                .verify.visible('#noRepetitiveBendingid_error')
                .verify.visible('#useCautionWhileEnteringid_error')
                .verify.visible('#lightRecreationid_error')
                .verify.visible('#returnto_option1_error')
                .verify.visible('#acceptstatement_id_error')
                .verify.visible('#workschoolwholeForm_error')
             
             

             excused_from=Math.floor((Math.random()*3)+1)
             confined_to=Math.floor((Math.random()*2)+1)
             Maximum_lifting=Math.floor((Math.random()*5)+1)
             force_pushing=Math.floor((Math.random()*5)+1)
             var a=['40' , '50' , '60' , '70' , '80']
             long_distances=a[Math.floor(Math.random()*a.length)]
             Sitting_excessive=Math.floor((Math.random()*5)+1)
             Standing_excessive=Math.floor((Math.random()*5)+1)
             noRepetitiveBending=Math.floor((Math.random()*1000)+100)
             var b=['yes' , 'no']
             useCautionWhileEntering=b[Math.floor(Math.random()*b.length)]
             var c=['yellow' , 'red' , 'green']
             lightRecreation=c[Math.floor(Math.random()*c.length)]
             returnto=Math.floor((Math.random()*3)+1)

             browser
               .useCss()
               .pause(500)
               .getLocationInView('#unableToDrivelongDistancesid')
               .pause(500)
               .getLocationInView('#date_id')
               .pause(500)
               .click('input[name="beExcusedRadio"][value="'+excused_from+'"]')
               .click('input[name="beConfinedRadio"][value="'+confined_to+'"]')
               .click('input[name="maximumLiftingCapabilitRadio"][value="'+Maximum_lifting+'"]')
               .click('input[name="lowForcePushingRadio"][value="'+force_pushing+'"]')
               .clearValue('#unableToDrivelongDistancesid')
               .setValue('#unableToDrivelongDistancesid' , long_distances)
               .click('input[name="sittingExcessivePeriodsRadio"][value="'+Sitting_excessive+'"]')
               .pause(500)
               .getLocationInView('#lightRecreationid')
               .pause(500)
               .getLocationInView('#unableToDrivelongDistancesid')
               .pause(500)
               .click('input[name="standingExcessivePeriodsRadio"][value="'+Standing_excessive+'"]')
               .clearValue('#noRepetitiveBendingid')
               .setValue('#noRepetitiveBendingid' , noRepetitiveBending)
               .clearValue('#useCautionWhileEnteringid')
               .setValue('#useCautionWhileEnteringid' , useCautionWhileEntering)
               .clearValue('#lightRecreationid')
               .setValue('#lightRecreationid' ,  lightRecreation)
               .click('input[name="returnto"][value="'+returnto+'"]')
               .pause(500)
               .getLocationInView('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
               .pause(500)
               .getLocationInView('#diagnosisid')
               .pause(500)
               .click('#acceptstatement_id')
               .pause(300)
               .click('button[class="btn btn-primary requestRecHidden uncompletedVisible"][type="submit"]')
               .useXpath()
        .waitForElementNotPresent("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Work School Excused Slip']" , 60000)
        .pause(500)
        
        .verify.elementNotPresent("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Work School Excused Slip']")
        .pause(500)
        .useCss()
         .click('a[href="/EHR/EHR/j_spring_security_logout"]')
         .waitForElementVisible('#username_id' , 60000)
         .pause(500)
},
'Admin login':function(browser){
  browser
     .useCss()
     .pause(500)
     .setValue('#username_id' , Data.user1[1].username)
     .setValue('#password_id' , Data.user1[1].password)
     .pause(300)
     .click('button[class="btn btn-primary"][type="submit"]')
     .waitForElementVisible('a[class=""]' , 60000)
     .pause(500)
     .click('a[class="firstLevel"]')
     .pause(300)
     .click('a[href="/EHR/Clinicadmin/view-patient-details-open"]')
     .waitForElementVisible('a[onclick="getPatientProfile()"]' , 60000)
     .pause(500)
     .click('a[onclick="postNavigateToProfile('+id+',1);"]')
     .waitForElementVisible('#patient_first_name' , 60000)
     .pause(500)
     .click('a[onclick="getAdminDefaultFormList();"]')
     .waitForElementVisible('button[onclick="getFormsList()"]' , 60000)
     .pause(500)

},
'Check':function(browser){
  browser
     .useXpath()
     .waitForElementVisible("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Health Insurance Verification']" , 60000)
     .pause(1000)
     .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Work School Excused Slip']")
     .pause(1000)
     .getLocationInView("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Health Insurance Verification']")
     .pause(1000)
     .click("//*[@id='adminDefaultFormsContent']/div/div/a[text()='Work School Excused Slip']")
     .useCss()
     .waitForElementVisible('#btnExportPatientForm' , 60000)
     .pause(500)
     .workschoolexcusedslip(excused_from_1 , confined_to_1 , Maximum_lifting_1 , force_pushing_1, long_distances_1, Sitting_excessive_1, 
                                      Standing_excessive_1,noRepetitiveBending_1, useCautionWhileEntering_1, lightRecreation_1, returnto_1,excused_from,
                                      confined_to,Maximum_lifting,force_pushing,long_distances,Sitting_excessive,Standing_excessive,noRepetitiveBending,
                                      useCautionWhileEntering,lightRecreation,returnto)
               .pause(500)
               .end()
        
},
'Result':''+function(browser){
    browser

        console.log("excused_from-------------->"+[excused_from==excused_from_1])
        console.log("confined_to--------------->"+[confined_to==confined_to_1])
        console.log("Maximum_lifting----------->"+[Maximum_lifting==Maximum_lifting_1])
        console.log("force_pushing------------->"+[force_pushing==force_pushing_1])
        console.log("long_distances------------>"+[long_distances==long_distances_1])
        console.log("Sitting_excessive--------->"+[Sitting_excessive==Sitting_excessive_1])
        console.log("Standing_excessive-------->"+[Standing_excessive==Standing_excessive_1])
        console.log("noRepetitiveBending------->"+[noRepetitiveBending==noRepetitiveBending_1])
        console.log("useCautionWhileEntering--->"+[useCautionWhileEntering==useCautionWhileEntering_1])
        console.log("lightRecreation----------->"+[lightRecreation==lightRecreation_1])
        console.log("returnto------------------>"+[returnto==returnto_1])

}
}
